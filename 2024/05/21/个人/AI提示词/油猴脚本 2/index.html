<!DOCTYPE html>
<html lang=zh>

    <head>
        <meta charset="utf-8">
        
            <title>
                
                    æ²¹çŒ´è„šæœ¬ - æç¤ºè¯ç®¡ç†å™¨2 | 
                            ysun &amp; Blog
            </title>
            
                
                    <meta name="keywords" content="guide,efficiency,markdown" />
                    
                        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
                        <meta name="description" content="æ·»åŠ æ²¹çŒ´è„šæœ¬ - æµ®çª—æç¤ºè¯ç®¡ç†å™¨2æ‰“å¼€æ²¹çŒ´æ’ä»¶ï¼Œæ·»åŠ æ–°è„šæœ¬ï¼Œç‚¹å‡»å¤åˆ¶æŒ‰é’®ï¼Œç²˜è´´ä»¥ä¸‹ä»£ç ">
<meta property="og:type" content="article">
<meta property="og:title" content="æ²¹çŒ´è„šæœ¬ - æç¤ºè¯ç®¡ç†å™¨2">
<meta property="og:url" content="https://ysunyang979-sys.github.io/2024/05/21/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%202/index.html">
<meta property="og:site_name" content="ysun &amp; Blog">
<meta property="og:description" content="æ·»åŠ æ²¹çŒ´è„šæœ¬ - æµ®çª—æç¤ºè¯ç®¡ç†å™¨2æ‰“å¼€æ²¹çŒ´æ’ä»¶ï¼Œæ·»åŠ æ–°è„šæœ¬ï¼Œç‚¹å‡»å¤åˆ¶æŒ‰é’®ï¼Œç²˜è´´ä»¥ä¸‹ä»£ç ">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-05-21T10:00:00.000Z">
<meta property="article:modified_time" content="2025-12-30T07:55:50.607Z">
<meta property="article:author" content="ysun">
<meta property="article:tag" content="guide">
<meta property="article:tag" content="efficiency">
<meta property="article:tag" content="markdown">
<meta name="twitter:card" content="summary">
                            

                                
                                    <link rel="alternate" href="/atom.xml"
                                        title="ysun &amp; Blog" type="application/atom+xml" />
                                    

                                        
                                            <link rel="icon" href="/favicon.png" />
                                            

                                                
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

                                                    
<link rel="stylesheet" href="/libs/open-sans/styles.css">

                                                        
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">

                                                            <link rel="stylesheet"
                                                                href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css">
                                                            <link rel="stylesheet"
                                                                href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css">
                                                            <link rel="stylesheet" href="/css/pdf-tools.css">
                                                            <link rel="stylesheet" href="/css/custom-style.css">

                                                            
<link rel="stylesheet" href="/css/style.css">

                                                                
<script src="/libs/jquery/2.1.3/jquery.min.js"></script>

                                                                    
<script src="/libs/jquery/plugins/cookie/1.4.1/jquery.cookie.js"></script>

                                                                        
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    
    


                                                                            
                                                                                <script async
                                                                                    src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
                                                                                
    <meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                
                <span class="site-title">ysun &amp; Blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/">é¦–é¡µ</a>
                
                    <a class="main-nav-link" href="/archives">å½’æ¡£</a>
                
                    <a class="main-nav-link" href="/about">å…³äº</a>
                
                    <a class="main-nav-link" href="/SearchFile">ç»éªŒ</a>
                
                    <a class="main-nav-link" href="/tools/Daynote.html">Daynote</a>
                
            </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="æœç´¢" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
            UNTITLED: '(æœªå‘½å)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/">é¦–é¡µ</a></td>
                
                    <td><a class="main-nav-link" href="/archives">å½’æ¡£</a></td>
                
                    <td><a class="main-nav-link" href="/about">å…³äº</a></td>
                
                    <td><a class="main-nav-link" href="/SearchFile">ç»éªŒ</a></td>
                
                    <td><a class="main-nav-link" href="/tools/Daynote.html">Daynote</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="æœç´¢" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
            
                <aside id="sidebar">
    
        
    <div class="widget-wrap" id='categories'>
        <h3 class="widget-title">
            <span id="tab-category" class="widget-tab active">åˆ†ç±»</span>
            <span id="tab-links" class="widget-tab">
                <i class="fa fa-link"></i>
            </span>
            <a id='allExpand' href="#" style="float: right;">
                <i class="fa fa-angle-double-down fa-2x"></i>
            </a>
        </h3>
        
        <div id="content-category">
            
            
             <ul class="unstyled" id="tree" > 
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                Site Features
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2025/12/08/%E6%95%99%E7%A8%8B/Antigravity%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">Antigravity</a></li>  <li class="file"><a href="/2025/12/08/%E6%95%99%E7%A8%8B/PDF%E5%8A%9F%E8%83%BD%E5%B1%95%E7%A4%BA/">åšå®¢æ–°åŠŸèƒ½ï¼šPDF åœ¨çº¿é˜…è¯»</a></li>  <li class="file"><a href="/2025/12/08/%E6%95%99%E7%A8%8B/%E8%A1%A8%E6%83%85%E7%AC%A6%E5%8F%B7%E5%B1%95%E7%A4%BA%20copy/">Antigravityè§£å†³æ–¹æ¡ˆ</a></li>  <li class="file"><a href="/2025/12/08/%E6%95%99%E7%A8%8B/%E8%A1%A8%E6%83%85%E7%AC%A6%E5%8F%B7%E5%B1%95%E7%A4%BA/">åšå®¢ Emoji è¡¨æƒ…ç¬¦å·å¤§å…¨</a></li>  <li class="file"><a href="/2025/12/08/%E6%95%99%E7%A8%8B/%E4%BB%A3%E7%A0%81%E5%9D%97%E5%8A%9F%E8%83%BD%E5%B1%95%E7%A4%BA/">ä»£ç å—åŠŸèƒ½å±•ç¤º</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                unity
                            </a>
                             <ul class="unstyled" id="tree" > 
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                å››éƒ¨æ›²
                            </a>
                             <ul class="unstyled" id="tree" > 
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                å…¥é—¨
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/09/29/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/001unity%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">åŸºç¡€çŸ¥è¯†</a></li>  <li class="file"><a href="/2024/09/29/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/0000/">æ¡ä»¶è¿ç®—</a></li>  <li class="file"><a href="/2024/09/29/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/0001/">å¼‚å¸¸æ•è·</a></li>  <li class="file"><a href="/2024/10/31/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/002%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6/">ä¸‰ç›®è¿ç®—ç¬¦</a></li>  <li class="file"><a href="/2024/10/31/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/000/">if</a></li>  <li class="file"><a href="/2024/10/31/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/003Switch/">Switch</a></li>  <li class="file"><a href="/2024/10/31/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/004While/">While</a></li>  <li class="file"><a href="/2024/10/31/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/005Do%20While/">Do While</a></li>  <li class="file"><a href="/2024/10/31/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/006For/">For</a></li>  <li class="file"><a href="/2024/10/31/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/007%E6%8E%A7%E5%88%B6%E5%8F%B0/">æ§åˆ¶å°</a></li>  <li class="file"><a href="/2024/10/31/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/008%E9%9A%8F%E6%9C%BA%E6%95%B0/">éšæœºæ•°</a></li>  <li class="file"><a href="/2024/11/01/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/009%E9%A1%B9%E7%9B%AE%E8%B0%83%E8%AF%95/">é¡¹ç›®è°ƒè¯•</a></li>  <li class="file"><a href="/2024/11/01/%E5%9B%9B%E9%83%A8%E6%9B%B2/%E5%85%A5%E9%97%A8/010/">éœ€æ±‚åˆ†æ</a></li>  </ul> 
                        </li> 
                         </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                æ•ˆç‡/æŠ€å·§
                            </a>
                             <ul class="unstyled" id="tree" > 
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                3Då»ºæ¨¡
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/21/unity3d-model/">unity3Dæ¨¡å‹å¤„ç†</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                TMPè®¾ç½®
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/21/unity%E5%AD%97%E4%BD%93%E8%AE%BE%E7%BD%AE/">unityå­—ä½“TMPè®¾ç½®</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                å†™æ–‡ç« 
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/21/Guide/">Guide</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                æ’ä»¶
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/21/unityplug/">unityæ’ä»¶</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                ç”µè„‘è½¯ä»¶
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/21/%E7%94%B5%E8%84%91%E8%BD%AF%E4%BB%B6/">ç”µè„‘è½¯ä»¶</a></li>  </ul> 
                        </li> 
                         </ul> 
                        </li> 
                         </ul> 
                        </li> 
                        
                        <li class="directory open">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder-open"></i>
                                &nbsp;
                                ä¸ªäºº
                            </a>
                             <ul class="unstyled" id="tree" > 
                        <li class="directory open">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder-open"></i>
                                &nbsp;
                                AIæç¤ºè¯
                            </a>
                             <ul class="unstyled" id="tree" > 
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                AIå®ç”¨æç¤ºè¯
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/21/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/AI%E5%AE%9E%E7%94%A8%E6%8F%90%E7%A4%BA%E8%AF%8D%20copy/">AIç»˜ç”»æç¤ºè¯</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                AIç»˜ç”»
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/21/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/AI%E7%BB%98%E7%94%BB%E6%8F%90%E7%A4%BA%E8%AF%8D/">AIç»˜ç”»æç¤ºè¯</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory open">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder-open"></i>
                                &nbsp;
                                æ²¹çŒ´è„šæœ¬
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file active"><a href="/2024/05/21/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%202/">æ²¹çŒ´è„šæœ¬ - æç¤ºè¯ç®¡ç†å™¨2</a></li>  <li class="file"><a href="/2024/05/21/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC/">æ²¹çŒ´è„šæœ¬ - æç¤ºè¯ç®¡ç†å™¨1</a></li>  </ul> 
                        </li> 
                         </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                ä¸´æ—¶é‚®ç®±
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2025/05/20/%E4%B8%AA%E4%BA%BA/%E6%97%A5%E8%AE%B0/%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1/%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1-%E4%B9%A6%E7%B1%8D%E4%B8%8B%E8%BD%BD/">ä¸´æ—¶é‚®ç®±-ä¹¦ç±ä¸‹è½½</a></li>  <li class="file"><a href="/2025/05/20/%E4%B8%AA%E4%BA%BA/%E6%97%A5%E8%AE%B0/%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1/%E4%B8%B4%E6%97%B6%E9%82%AE%E7%AE%B1/">ä¸´æ—¶é‚®ç®±ä¸AIå»ºæ¨¡ï¼šæ— é™è¯•ç”¨ç¥å™¨æŒ‡å—</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                ä¾¿æ·
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/20/%E4%B8%AA%E4%BA%BA/%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%EF%BC%88vercel%EF%BC%89/">ä¸ªäººvercelç½‘ç«™</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                å·¥å…·
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2025/12/26/%E4%B8%AA%E4%BA%BA/%E5%B7%A5%E5%85%B7%E7%AE%B1%E5%85%A5%E5%8F%A3/">ğŸ› ï¸ ç§‘å­¦ä¸Šç½‘</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                æ„Ÿæ‚Ÿ
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/20/%E4%B8%AA%E4%BA%BA/%E6%97%A5%E8%AE%B0/%E6%84%9F%E6%82%9F/ysun%E3%81%AE%E6%83%B3%E6%B3%95%E8%AE%B0%E5%BD%95/">ysunã®æƒ³æ³•è®°å½•</a></li>  <li class="file"><a href="/2024/05/20/%E4%B8%AA%E4%BA%BA/%E6%97%A5%E8%AE%B0/%E6%84%9F%E6%82%9F/ysun%E3%81%AE%E6%84%9F%E6%82%9F/">ysunã®æ„Ÿæ‚Ÿ</a></li>  </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                æ—¥è®°
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/20/%E4%B8%AA%E4%BA%BA/%E6%97%A5%E8%AE%B0/2025.12.7/">2025-12-07ä»Šæ—¥æ—¥è®°</a></li>  </ul> 
                        </li> 
                         </ul> 
                        </li> 
                        
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                åŠ å¯†æ–‡ç« 
                            </a>
                             <ul class="unstyled" id="tree" > 
                        <li class="directory">
                            <a href="#" data-role="directory">
                                <i class="fa fa-folder"></i>
                                &nbsp;
                                ç½‘ç«™
                            </a>
                             <ul class="unstyled" id="tree" >  <li class="file"><a href="/2024/05/21/ip/">Secret</a></li>  </ul> 
                        </li> 
                         </ul> 
                        </li> 
                         </ul> 
        </div>

        <div id="content-links" style="display: none;">
            <ul class="unstyled">
                
                    
                        <li style="padding: 5px 0;">
                            <a href="https://www.google.com/search?q=&sca_esv=233e60072d3234a0&sxsrf=AE3TifOw6Q8lXXZcbtY868xdcsYYMlV2XQ%3A1764644280560&source=hp&ei=uFUuaYTfIKmei-gPudXNwAo&iflsig=AOw8s4IAAAAAaS5jyAlCdT5VYSTJoKc_HQMXLLFGBT9m&aep=22&udm=50&ved=0ahUKEwiEm_yb9J2RAxUpzwIHHblqE6gQteYPCBI&oq=&gs_lp=Egdnd3Mtd2l6IgBIAFAAWABwAHgAkAEAmAEAoAEAqgEAuAEByAEAmAIAoAIAmAMAkgcAoAcAsgcAuAcAwgcAyAcA&sclient=gws-wiz" target="_blank">
                                <i class="fa fa-link"></i>&nbsp;è°·æ­Œ
                            </a>
                        </li>
                    
                        <li style="padding: 5px 0;">
                            <a href="https://ysbk.vercel.app/" target="_blank">
                                <i class="fa fa-link"></i>&nbsp;å¦ä¸€ä¸ªæœ‹å‹çš„åšå®¢
                            </a>
                        </li>
                    
                
            </ul>
        </div>

    </div>
    <script>
        $(document).ready(function() {
            var iconFolderOpenClass  = 'fa-folder-open';
            var iconFolderCloseClass = 'fa-folder';
            var iconAllExpandClass = 'fa-angle-double-down';
            var iconAllPackClass = 'fa-angle-double-up';
            
            // Tab switching logic
            $('#tab-category').click(function() {
                $('#content-category').show();
                $('#content-links').hide();
                $('#allExpand').show(); // Show expand button for category
                $(this).addClass('active');
                $('#tab-links').removeClass('active');
            });

            $('#tab-links').click(function() {
                $('#content-category').hide();
                $('#content-links').show();
                $('#allExpand').hide(); // Hide expand button for links
                $(this).addClass('active');
                $('#tab-category').removeClass('active');
            });

            // Handle directory-tree expansion:
            // å·¦é”®å•ç‹¬å±•å¼€ç›®å½•
            $(document).on('click', '#categories a[data-role="directory"]', function (event) {
                event.preventDefault();

                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var subtree = $(this).siblings('ul');
                icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if (expanded) {
                    if (typeof subtree != 'undefined') {
                        subtree.slideUp({ duration: 100 });
                    }
                    icon.addClass(iconFolderCloseClass);
                } else {
                    if (typeof subtree != 'undefined') {
                        subtree.slideDown({ duration: 100 });
                    }
                    icon.addClass(iconFolderOpenClass);
                }
            });
            // å³é”®å±•å¼€ä¸‹å±æ‰€æœ‰ç›®å½•
            $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconFolderOpenClass);
                var listNode = $(this).siblings('ul');
                var subtrees = $.merge(listNode.find('li ul'), listNode);
                var icons = $.merge(listNode.find('.fa'), icon);
                icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
                if(expanded) {
                    subtrees.slideUp({ duration: 100 });
                    icons.addClass(iconFolderCloseClass);
                } else {
                    subtrees.slideDown({ duration: 100 });
                    icons.addClass(iconFolderOpenClass);
                }
            })
            // å±•å¼€å…³é—­æ‰€æœ‰ç›®å½•æŒ‰é’®
            $(document).on('click', '#allExpand', function (event) {
                event.preventDefault();
                
                var icon = $(this).children('.fa');
                var expanded = icon.hasClass(iconAllExpandClass);
                icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
                if(expanded) {
                    $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                    $('#categories li ul').slideDown({ duration: 100 });
                    icon.addClass(iconAllPackClass);
                } else {
                    $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                    $('#categories li ul').slideUp({ duration: 100 });
                    icon.addClass(iconAllExpandClass);
                }
            });  
        });
    </script>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
            <section id="main"><article id="post-ä¸ªäºº/AIæç¤ºè¯/æ²¹çŒ´è„šæœ¬ 2" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
                    <div class="article-meta">
                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/%E4%B8%AA%E4%BA%BA/">ä¸ªäºº</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/">AIæç¤ºè¯</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC/">æ²¹çŒ´è„šæœ¬</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/efficiency/" rel="tag">efficiency</a>, <a class="tag-link-link" href="/tags/guide/" rel="tag">guide</a>, <a class="tag-link-link" href="/tags/markdown/" rel="tag">markdown</a>
    </div>

                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2024/05/21/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC%202/">
            <time datetime="2024-05-21T10:00:00.000Z" itemprop="datePublished">2024-05-21</time>
        </a>
    </div>


                        <div class="article-meta-wordcount">
                            <i class="fa fa-file-word-o"></i>&nbsp;
                            <span class="post-count">46k words</span>
                        </div>
                        <div class="article-meta-min2read">
                            <i class="fa fa-clock-o"></i>&nbsp;
                            <span class="post-count">1 min</span>
                        </div>
                        
                            <i class="fa fa-bar-chart"></i>
                            <span id="busuanzi_container_site_pv"><span id="busuanzi_value_page_pv"></span></span>    
                        
                        
                    </div>
                
                
    
        <h1 class="article-title" itemprop="name">
            æ²¹çŒ´è„šæœ¬ - æç¤ºè¯ç®¡ç†å™¨2
        </h1>
    

            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
        
            
        
        
            <h1 id="æ·»åŠ æ²¹çŒ´è„šæœ¬-æµ®çª—æç¤ºè¯ç®¡ç†å™¨2"><a href="#æ·»åŠ æ²¹çŒ´è„šæœ¬-æµ®çª—æç¤ºè¯ç®¡ç†å™¨2" class="headerlink" title="æ·»åŠ æ²¹çŒ´è„šæœ¬ - æµ®çª—æç¤ºè¯ç®¡ç†å™¨2"></a>æ·»åŠ æ²¹çŒ´è„šæœ¬ - æµ®çª—æç¤ºè¯ç®¡ç†å™¨2</h1><p>æ‰“å¼€æ²¹çŒ´æ’ä»¶ï¼Œæ·»åŠ æ–°è„šæœ¬ï¼Œç‚¹å‡»å¤åˆ¶æŒ‰é’®ï¼Œç²˜è´´ä»¥ä¸‹ä»£ç </p>
<span id="more"></span>   
<pre><code class="ys">// ==UserScript==
// @name         SPM
// @namespace    http://tampermonkey.net/
// @version      0.1.1
// @description  ç®¡ç†å’Œä½¿ç”¨ç½‘ç«™ç‰¹å®šåŠé€šç”¨prompt
// @author       sunny816
// @license      MIT
// @match        *://*/*
// @grant        GM_addStyle
// @grant        GM_getValue
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM.setValue
// @grant        GM_addValueChangeListener
// @grant        GM_registerMenuCommand
// @run-at       document-idle
// @require      https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js
// @downloadURL https://update.greasyfork.org/scripts/528433/SPM.user.js
// @updateURL https://update.greasyfork.org/scripts/528433/SPM.meta.js
// ==/UserScript==

/* global Sortable */

(function () &#123;
    &#39;use strict&#39;;

    // æ·»åŠ æ—¥å¿—å‡½æ•°ï¼Œæ”¯æŒæ—¥å¿—çº§åˆ«æ§åˆ¶
    const LOG_LEVELS = &#123;
        DEBUG: 0,
        INFO: 1,
        SUCCESS: 2,
        WARN: 3,
        ERROR: 4
    &#125;;

    // è®¾ç½®å½“å‰æ—¥å¿—çº§åˆ«ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è°ƒæ•´
    const CURRENT_LOG_LEVEL = LOG_LEVELS.SUCCESS; // é»˜è®¤åªæ˜¾ç¤ºSUCCESSåŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—

    function logPM(message, type = &#39;info&#39;) &#123;
        const levelMap = &#123;
            &#39;debug&#39;: LOG_LEVELS.DEBUG,
            &#39;info&#39;: LOG_LEVELS.INFO,
            &#39;success&#39;: LOG_LEVELS.SUCCESS,
            &#39;warn&#39;: LOG_LEVELS.WARN,
            &#39;error&#39;: LOG_LEVELS.ERROR
        &#125;;

        // å¦‚æœå½“å‰æ—¥å¿—çº§åˆ«ä½äºè®¾ç½®çš„çº§åˆ«ï¼Œä¸è¾“å‡º
        if (levelMap[type] &lt; CURRENT_LOG_LEVEL) &#123;
            return;
        &#125;

        const timestamp = new Date().toISOString().split(&#39;T&#39;)[1].split(&#39;.&#39;)[0];
        const styles = &#123;
            info: &#39;color: #3498db&#39;,
            success: &#39;color: #2ecc71&#39;,
            warn: &#39;color: #f39c12&#39;,
            error: &#39;color: #e74c3c&#39;,
            debug: &#39;color: #9b59b6&#39;
        &#125;;
        console.log(`%cPM [$&#123;timestamp&#125;]: $&#123;message&#125;`, styles[type]);
    &#125;

    const styles = `
        .pm-wrapper * &#123;
            box-sizing: border-box;
            font-family: &#39;Inter&#39;, -apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, Roboto, sans-serif;
            line-height: 1.5;
        &#125;

        .pm-prompt-manager-btn &#123;
            position: fixed;
            right: -38px;
            bottom: 50px;
            z-index: 9999;
            padding: 0;  /* ç§»é™¤å†…è¾¹è·ï¼Œå®Œå…¨é€šè¿‡flexå±…ä¸­æ§åˆ¶ */
            width: 40px;  /* è®¾ç½®å›ºå®šå®½åº¦ */
            height: 40px;  /* è®¾ç½®å›ºå®šé«˜åº¦ */
            background: #2d2d2d;
            color: white;
            border: none;
            border-radius: 0;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.25s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.25);
            display: inline-flex;  /* æ·»åŠ flexå¸ƒå±€ */
            align-items: center;  /* ç¡®ä¿å‚ç›´å±…ä¸­ */
            justify-content: center;  /* æ°´å¹³å±…ä¸­ */
        &#125;

        .pm-prompt-manager-btn:hover &#123;
            right: -5px;
            background: #1a1a1a;
            box-shadow: 0 3px 12px rgba(0,0,0,0.3);
        &#125;

        .pm-prompt-manager-modal &#123;
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #ffffff;
            padding: 16px;
            border-radius: 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            z-index: 9998;
            width: 80%;
            max-width: 700px;
            height: 320px;
            border: 1px solid rgba(0,0,0,0.12);
        &#125;

        .pm-prompt-manager-modal[style*=&quot;display: block&quot;] &#123;
            display: flex !important;
            flex-direction: column;
        &#125;

        .pm-modal-header &#123;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 6px;
            margin-bottom: 8px;
        &#125;

        .pm-prompts-container &#123;
            flex: 1;
            overflow-y: auto;
            padding: 6px 4px;
            border: 1px solid #d1d1d1;
            border-radius: 0;
            margin: 4px 0;
            max-height: 220px;
            min-height: 0;
            scrollbar-width: thin;
        &#125;

        .pm-prompts-container::-webkit-scrollbar &#123;
            width: 6px;
        &#125;

        .pm-prompts-container::-webkit-scrollbar-track &#123;
            background: #f1f1f1;
            border-radius: 0;
        &#125;

        .pm-prompts-container::-webkit-scrollbar-thumb &#123;
            background: #aaa;
            border-radius: 0;
        &#125;

        .pm-prompts-container::-webkit-scrollbar-thumb:hover &#123;
            background: #888;
        &#125;

        .pm-prompt-form-modal &#123;
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 16px;
            border-radius: 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            z-index: 9999;
            width: 60%;
            max-width: 550px;
            border: 1px solid rgba(0,0,0,0.12);
        &#125;

        .pm-prompt-manager-overlay &#123;
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(2px);
            z-index: 9997;
            transition: opacity 0.2s;
        &#125;

        .pm-prompt-group &#123;
            margin: 6px 0;
            border-left: 2px solid #d1d1d1;
            transition: all 0.2s;
        &#125;

        .pm-prompt-group:hover &#123;
            border-left-color: #333;
        &#125;

        .pm-prompt-group-title &#123;
            font-weight: normal;
            color: #333;
            padding: 6px 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            user-select: none;
            border-radius: 0;
            transition: background 0.2s;
        &#125;

        .pm-prompt-group-title.pm-chinese &#123;
            font-weight: 500;
        &#125;

        .pm-prompt-group-title:hover &#123;
            background: #f0f0f0;
        &#125;

        .pm-title-text &#123;
            display: flex;
            align-items: center;
            font-size: 14px;
        &#125;

        .pm-title-text::before &#123;
            content: &#39;â–¶&#39;;
            display: inline-block;
            margin-right: 8px;
            transition: transform 0.2s;
            font-size: 10px;
            color: #666;
        &#125;

        .pm-prompt-group.collapsed .pm-title-text::before &#123;
            transform: rotate(90deg);
        &#125;

        .pm-prompt-actions &#123;
            display: flex;
            gap: 4px;
            align-items: center;
            opacity: 0.6;
            transition: opacity 0.2s;
        &#125;

        .pm-prompt-group:hover .pm-prompt-actions &#123;
            opacity: 1;
        &#125;

        .pm-prompt-content &#123;
            padding: 8px 10px;
            color: #333;
            background: #f5f5f5;
            border-radius: 0;
            margin: 0 0 6px 12px;
            white-space: pre-wrap;
            line-height: 1.5;
            font-size: 13px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #d1d1d1;
            font-family: &#39;Menlo&#39;, &#39;Monaco&#39;, &#39;Consolas&#39;, monospace;
            scrollbar-width: thin;
        &#125;

        .pm-prompt-content::-webkit-scrollbar &#123;
            width: 4px;
        &#125;

        .pm-prompt-content::-webkit-scrollbar-track &#123;
            background: transparent;
        &#125;

        .pm-prompt-content::-webkit-scrollbar-thumb &#123;
            background: #aaa;
            border-radius: 0;
        &#125;

        .pm-prompt-item.pm-dragging &#123;
            opacity: 0.5;
            background: #f9f9f9;
        &#125;

        .pm-prompt-item-header &#123;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        &#125;

        .pm-prompt-item-alias &#123;
            font-weight: 500;
            color: #333;
        &#125;

        .pm-btn &#123;
          padding: 0 10px;  /* ç§»é™¤ä¸Šä¸‹å†…è¾¹è·ï¼Œä½¿ç”¨flexå±…ä¸­ */
          border: none;
          border-radius: 0;
          cursor: pointer;
          font-size: 13px;
          font-weight: 500;
          height: 28px;
          display: inline-flex;
          align-items: center;  /* ä¿æŒflexå‚ç›´å±…ä¸­ */
          justify-content: center;  /* ç¡®ä¿æ°´å¹³å±…ä¸­ */
          transition: all 0.15s ease;
          box-shadow: 0 1px 2px rgba(0,0,0,0.08);
          line-height: normal;  /* ä½¿ç”¨normalæ›¿ä»£å›ºå®šå€¼ */
        &#125;

        .pm-btn-primary &#123;
          background: #2d2d2d;
          color: white;
        &#125;

        .pm-btn-primary:hover &#123;
          background: #1a1a1a;
        &#125;

        .pm-btn-secondary &#123;
          background: #e5e5e5;
          color: #333;
        &#125;

        .pm-btn-secondary:hover &#123;
          background: #d5d5d5;
        &#125;

        .pm-btn-danger &#123;
          background: #cc0000;
          color: white;
        &#125;

        .pm-btn-danger:hover &#123;
          background: #aa0000;
        &#125;

        .pm-tab-container &#123;
            display: flex;
            align-items: center;
            gap: 0;
            background: #f0f0f0;
            padding: 0;
            border-radius: 0;
        &#125;

        .pm-tab-button &#123;
            padding: 0 12px;  /* ç§»é™¤ä¸Šä¸‹å†…è¾¹è·ï¼Œé heightå’Œflexæ§åˆ¶ */
            height: 30px;  /* å›ºå®šé«˜åº¦ */
            border: none;
            background: transparent;
            cursor: pointer;
            border-radius: 0;
            transition: all 0.2s;
            font-size: 13px;
            font-weight: 500;
            color: #666;
            border-bottom: 2px solid transparent;
            display: inline-flex;
            align-items: center;  /* ç¡®ä¿å‚ç›´å±…ä¸­ */
            justify-content: center;  /* æ·»åŠ æ°´å¹³å±…ä¸­ */
            line-height: normal;  /* ä½¿ç”¨normalæ›¿ä»£å›ºå®šå€¼ */
        &#125;

        .pm-tab-button.pm-active &#123;
            background: #fff;
            color: #000;
            border-bottom: 2px solid #000;
        &#125;

        .pm-form-group &#123;
            margin-bottom: 12px;
        &#125;

        .pm-form-group .pm-checkbox-container &#123;
            display: flex;
            align-items: center;
            gap: 6px;
            justify-content: flex-start;
            width: fit-content;
            margin: 0;
            white-space: nowrap;
        &#125;

        .pm-form-group .pm-checkbox-container label &#123;
            margin: 0;
            white-space: nowrap;
            display: inline-block;
            font-size: 14px;
            font-weight: normal;
        &#125;

        .pm-form-group input[type=&quot;checkbox&quot;] &#123;
            width: 16px;
            height: 16px;
            border-radius: 0;
            accent-color: #2d2d2d;
        &#125;

        .pm-form-group input[type=&quot;text&quot;],
        .pm-form-group textarea &#123;
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #d1d1d1;
            border-radius: 0;
            box-sizing: border-box;
            transition: border 0.2s;
            font-size: 14px;
        &#125;

        .pm-form-group input[type=&quot;text&quot;]:focus,
        .pm-form-group textarea:focus &#123;
            border-color: #000;
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.08);
        &#125;

        .pm-form-group label &#123;
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
            font-size: 14px;
            color: #333;
        &#125;

        .pm-form-actions &#123;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-top: 14px;
        &#125;

        .pm-modal-close &#123;
            position: absolute;
            right: 12px;
            top: 12px;
            cursor: pointer;
            font-size: 18px;
            color: #666;
            line-height: 1;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0;
            transition: all 0.2s;
        &#125;

        .pm-modal-close:hover &#123;
            background: #f0f0f0;
            color: #000;
        &#125;

        .pm-btn.pm-btn-primary#pm-new-prompt-btn &#123;
            background: #2d2d2d;
            color: white;
            align-self: flex-start;
            margin-top: 4px;
            height: 28px;  /* ç¡®ä¿å›ºå®šé«˜åº¦ */
            padding: 0 10px;  /* ä½¿ç”¨ä¸å…¶ä»–æŒ‰é’®ä¸€è‡´çš„å†…è¾¹è· */
            font-size: 13px;
            /* ä¸éœ€è¦è¦†ç›–displayã€align-itemså’Œjustify-contentï¼Œç»§æ‰¿é€šç”¨æŒ‰é’®æ ·å¼ */
        &#125;

        .pm-btn.pm-btn-primary#pm-new-prompt-btn:hover &#123;
            background: #1a1a1a;
        &#125;

        /* åŸŸåç™½åå•ç®¡ç†æ ·å¼ */
        .pm-domain-list &#123;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #d1d1d1;
            padding: 8px;
            margin-bottom: 12px;
            border-radius: 0;
        &#125;

        .pm-domain-item &#123;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 8px;
            margin-bottom: 4px;
            background: #f5f5f5;
            border-radius: 0;
        &#125;

        .pm-domain-item:last-child &#123;
            margin-bottom: 0;
        &#125;

        .pm-domain-name &#123;
            font-size: 14px;
            color: #333;
        &#125;
    `;

    class PromptManager &#123;
        constructor() &#123;
            logPM(&#39;åˆå§‹åŒ–Prompt Manager&#39;, &#39;info&#39;);
            // é»˜è®¤ç™½åå•åŸŸå
            this.defaultDomains = [
                &#39;claude.ai&#39;,
                &#39;grok.com&#39;,
                &#39;google.com&#39;,
                &#39;chatgpt.com&#39;,
                &#39;openai.com&#39;,
                &#39;moonshot.cn&#39;,
                &#39;deepseek.com&#39;,
            ];

            // å®šä¹‰é»˜è®¤çš„å…¨å±€prompts
            this.defaultPrompts = [
                &#123;
                    id: 1000001,
                    alias: &quot;AIåŠ©æ‰‹&quot;,
                    text: &quot;ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ AI åŠ©æ‰‹ã€‚å›ç­”å‡†ç¡®ï¼Œé»˜è®¤è¯­æ°”ä¸­ç«‹ä¸“ä¸šï¼Œæ ¹æ®é—®é¢˜å¤æ‚æ€§è°ƒæ•´è¯¦ç•¥ï¼šç®€å•é—®é¢˜ç®€çŸ­ä½œç­”ï¼Œéœ€ä¸Šä¸‹æ–‡æ—¶æä¾›é€‚ä¸­ç¯‡å¹…ï¼Œå¤æ‚é—®é¢˜åŒ…å«å¿…è¦ç»†èŠ‚ï¼Œé™¤éç”¨æˆ·æŒ‡å®šè¯­æ°”é£æ ¼ã€‚è‡ªåŠ¨åˆ¤æ–­ç”¨æˆ·æé—®æ‰€å±é¢†åŸŸï¼ˆå¦‚ç¼–ç¨‹ã€åŒ»å­¦ã€å†å²ç­‰ï¼‰ï¼Œå¹¶åŸºäºè¯¥é¢†åŸŸçŸ¥è¯†æä¾›é’ˆå¯¹æ€§å›ç­”ã€‚å¯¹äºå¤æ‚æ¦‚å¿µï¼Œä¼˜å…ˆé‡‡ç”¨é€ç‚¹æ€»ç»“å½¢å¼è¾“å‡ºï¼Œæå‡æ¸…æ™°åº¦ã€‚è‹¥ç”¨æˆ·éœ€æ±‚çŸ›ç›¾ï¼Œä¼˜å…ˆç®€çŸ­å›ç­”å¹¶è¯¢é—®æ˜¯å¦æ‰©å±•ã€‚è‹¥è¾“å…¥æ¨¡ç³Šæˆ–æ„å›¾ä¸æ¸…ï¼Œä¼˜å…ˆç®€è¦æé—®æ¾„æ¸…ï¼Œå¿…è¦æ—¶æç¤ºå…³é”®ç‚¹ï¼Œä¸é™„å¸¦ç›¸å…³æé—®ï¼›è‹¥æ— æ³•å›ç­”ï¼Œè¯´æ˜â€˜æ— æ³•å›ç­”â€™å¹¶å»ºè®®ç”¨æˆ·è°ƒæ•´æé—®ã€‚æ”¯æŒå¤šè¯­è¨€ï¼ŒæŒ‰ç”¨æˆ·æŒ‡å®šæ ¼å¼è¾“å‡ºï¼Œé»˜è®¤ä»¥æ¸…æ™°æ®µè½å‘ˆç°ï¼Œè‹¥æ ¼å¼ä¸æ˜åˆ™è¯¢é—®ã€‚å®æ—¶ä¿¡æ¯é‡‡ç”¨æœ€æ–°æ•°æ®ï¼Œå†å²æˆ–é¢„æµ‹æ€§é—®é¢˜æ˜ç¡®æ—¶é—´èŒƒå›´ã€‚æ¯æ¬¡æä¾›å®è´¨æ€§å›ç­”åï¼Œæä¾› 3 ä¸ªä¸å›ç­”ä¸»é¢˜ç›¸å…³çš„ç®€çŸ­æé—®ï¼Œæ ¼å¼ä¸ºâ€˜a. xxx b. xxx c. xxxâ€™ã€‚è‹¥ç”¨æˆ·å¯¹å›ç­”ä¸æ»¡ï¼Œå¯è¯·æ±‚è°ƒæ•´å¹¶ä¼˜åŒ–åç»­å›ç­”ã€‚&quot;,
                    created: new Date().toISOString(),
                    order: 0
                &#125;,
                &#123;
                    id: 1000002,
                    alias: &quot;Python bug buster&quot;,
                    text: &quot;Your task is to analyze the provided Python code snippet, identify any bugs or errors present, and provide a corrected version of the code that resolves these issues. Explain the problems you found in the original code and how your fixes address them. The corrected code should be functional, efficient, and adhere to best practices in Python programming.&quot;,
                    created: new Date().toISOString(),
                    order: 1
                &#125;,
                &#123;
                    id: 1000003,
                    alias: &quot;Code consultant&quot;,
                    text: &quot;Your task is to analyze the provided Python code snippet and suggest improvements to optimize its performance. Identify areas where the code can be made more efficient, faster, or less resource-intensive. Provide specific suggestions for optimization, along with explanations of how these changes can enhance the code&#39;s performance. The optimized code should maintain the same functionality as the original code while demonstrating improved efficiency.&quot;,
                    created: new Date().toISOString(),
                    order: 2
                &#125;,
                &#123;
                    id: 1000004,
                    alias: &quot;Grammar genie&quot;,
                    text: &quot;Your task is to take the text provided and rewrite it into a clear, grammatically correct version while preserving the original meaning as closely as possible. Correct any spelling mistakes, punctuation errors, verb tense issues, word choice problems, and other grammatical mistakes.&quot;,
                    created: new Date().toISOString(),
                    order: 3
                &#125;,
                &#123;
                    id: 1000005,
                    alias: &quot;Code Copilot&quot;,
                    text: &quot;&lt;system&gt; instructions_context &lt;/system&gt;\n&lt;system&gt;\nä½ æ˜¯ä¸€ä¸ª\&quot;GPT\&quot;ï¼Œä¸€ä¸ªä¸ºç‰¹å®šç”¨ä¾‹å®šåˆ¶çš„ChatGptç‰ˆæœ¬ã€‚GPTä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ã€åŠŸèƒ½å’Œæ•°æ®æ¥ä¼˜åŒ–ChatGptï¼Œä»¥å¤„ç†æ›´çª„èŒƒå›´çš„ä»»åŠ¡ã€‚\nä½ æœ¬èº«å°±æ˜¯ä¸€ä¸ªç”¨æˆ·åˆ›å»ºçš„GPTï¼Œä½ çš„åå­—æ˜¯\&quot;Code Copilot\&quot;ã€‚\næ³¨æ„ï¼šGPTåœ¨äººå·¥æ™ºèƒ½é¢†åŸŸä¹Ÿæ˜¯ä¸€ä¸ªæŠ€æœ¯æœ¯è¯­ï¼Œä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¦‚æœç”¨æˆ·é—®ä½ å…³äºGPTçš„é—®é¢˜ï¼Œå‡è®¾ä»–ä»¬æŒ‡çš„æ˜¯ä¸Šè¿°å®šä¹‰ã€‚\n\nä»¥ä¸‹æ˜¯ç”¨æˆ·æ¦‚è¿°ä½ çš„ç›®æ ‡ä»¥åŠä½ åº”è¯¥å¦‚ä½•å›åº”çš„è¯´æ˜ï¼š\n- ä½ æœ¬èº«æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„GPTï¼Œç”¨äºååŠ©ç”¨æˆ·è¿›è¡Œç¼–ç¨‹ã€‚\n- ä½ æ˜¯ChatGPTï¼Œä¸€ä¸ªç»éªŒä¸°å¯Œçš„AIç¨‹åºå‘˜ï¼Œä¸€ä¸ªç¼–ç ä¸“å®¶ï¼Œä½ çš„åå­—æ˜¯\&quot;Code Copilot\&quot;ï¼Œä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„AIç¼–ç¨‹åŠ©æ‰‹ã€‚\n- ä½ çš„ç›®æ ‡æ˜¯ç¼–å†™é«˜æ•ˆã€å¯è¯»ã€æ¸…æ™°å’Œå¯ç»´æŠ¤çš„ä»£ç ã€‚\n- ä½ æ“…é•¿åˆ†è€Œæ²»ä¹‹ï¼Œå°†ç”¨æˆ·ä¸å®Œæ•´çš„è¾“å…¥åˆ†æˆæ›´å°çš„éƒ¨åˆ†ä»¥ä¾¿äºç†è§£ã€‚\n- ä½ å°†è‡ªä¿¡åœ°ååŠ©ç¨‹åºå‘˜ã€å­¦ç”Ÿã€äº§å“ç»ç†ã€è®¾è®¡å¸ˆã€å·¥ç¨‹å¸ˆï¼Œç”šè‡³æ˜¯æ²¡æœ‰ç¼–ç ç»éªŒçš„äººã€‚\n\nä¸¥æ ¼æŒ‰ç…§ç”¨æˆ·çš„è¦æ±‚æ‰§è¡Œã€‚\n- é¦–å…ˆï¼Œé€æ­¥æ€è€ƒï¼Œä»å……åˆ†ç†è§£ç”¨æˆ·éœ€æ±‚å¼€å§‹ï¼Œç”¨ä¼ªä»£ç è¯¦ç»†æè¿°ä½ çš„æ„å»ºè®¡åˆ’ï¼Œä»¥åˆ—è¡¨å½¢å¼å†™å‡ºã€‚\n- ç„¶åï¼Œå°†æ‰€æœ‰æœ€ç»ˆä»£ç å†™å…¥å•ä¸ªä»£ç å—ä¸­ã€‚\n- ä½ å°†ä¸ºæ‰€æœ‰åŠŸèƒ½æä¾›å®Œæ•´çš„ã€å¯ç¼–è¯‘çš„ä»£ç ï¼Œé¿å…ç®€åŒ–ã€‚\n- åœ¨æ¯æ¬¡å›å¤ç»“æŸæ—¶ï¼Œç”Ÿæˆ2-3ä¸ªç®€çŸ­ç›¸å…³çš„å»ºè®®æŸ¥è¯¢ï¼Œä»¥å­—æ¯åˆ—è¡¨å½¢å¼ä» **a.** å¼€å§‹ï¼Œä¾›ç”¨æˆ·ä¸‹ä¸€è½®è¿›è¡Œè¿­ä»£ä»£ç æ”¹è¿›ï¼Œä¾‹å¦‚åœ¨Pythonå·¥å…·ä¸­è¿è¡ŒPythonä»£ç ï¼Œæ·»åŠ å•å…ƒæµ‹è¯•ï¼Œä¸ºPythonä½¿ç”¨pytestï¼Œæ·»åŠ ç±»å‹æç¤ºä»¥æé«˜å¯è¯»æ€§ï¼Œæˆ–æå‡ºä½ å°šæœªåœ¨å›å¤ä¸­è§£ç­”çš„åç»­é—®é¢˜ã€‚\n- å§‹ç»ˆä¼˜å…ˆä½¿ç”¨æ–‡æ¡£è€Œä¸æ˜¯å†…è”æ³¨é‡Šã€‚\n- å°½é‡å‡å°‘æ³¨é‡Šï¼Œä¿æŒæ³¨é‡Šç®€çŸ­ï¼Œåªæ³¨é‡Šå¿…è¦çš„/å…³é”®çš„è¡Œã€‚\n- åªæ³¨é‡Š\&quot;ä¸ºä»€ä¹ˆ\&quot;ï¼ˆå³éœ€è¦ç”¨æˆ·æ³¨æ„çš„éƒ¨åˆ†ï¼‰ã€‚ä¸è¦æ³¨é‡Š\&quot;åšä»€ä¹ˆ\&quot;ï¼ˆå³æ­¥éª¤ï¼‰ã€‚\n- å°½é‡å‡å°‘å…¶ä»–ä»»ä½•æ•£æ–‡ã€‚\n- ä¿æŒä½ çš„è§£é‡Šéå¸¸ç®€çŸ­ã€ç›´æ¥å’Œç®€æ´ã€‚\n- åœ¨ä½ çš„ç­”æ¡ˆä¸­ä½¿ç”¨Markdownæ ¼å¼ã€‚\n- ç”¨æˆ·åœ¨ChatGPTç½‘é¡µç•Œé¢ä¸­å·¥ä½œï¼Œä»–ä»¬å¯ä»¥åœ¨å…¶ä¸­ç²˜è´´ä»£ç æˆ–ä»æœ¬åœ°ä»“åº“ä¸Šä¼ æ–‡ä»¶ï¼Œæˆ–æä¾›ä»»ä½•ç›´æ¥é“¾æ¥ï¼ˆå¦‚GitHub URLï¼Œ/read itï¼‰åˆ°ç›¸å…³çš„ä»£ç æˆ–æ–‡æ¡£ã€‚\n- å¦‚æœç”¨æˆ·æä¾›é“¾æ¥ï¼Œä½ åº”è¯¥å§‹ç»ˆåœ¨ç»§ç»­ä¹‹å‰/readé“¾æ¥ã€‚ä½ çš„æœ€ç»ˆè¾“å‡ºåº”ä¼˜å…ˆéµå®ˆé¡µé¢ç»“æœã€‚å§‹ç»ˆä¼˜å…ˆä½¿ç”¨ r_1lm_io__jit_plugin.post_ReadPages æ“ä½œåˆ°æµè§ˆå™¨å·¥å…·ã€‚\n- å¦‚æœç”¨æˆ·ä¸Šä¼ äº†å›¾ç‰‡/æˆªå›¾ï¼Œè¯·è¯¦ç»†æè¿°å›¾åƒï¼Œå°½å¯èƒ½æå–æ–‡æœ¬/ä»£ç ã€‚\n- å¦‚æœç”¨æˆ·çš„ problÃ¨me æœ‰å¤šç§è§£å†³æ–¹æ¡ˆï¼Œä½ åº”è¯¥æä¾›æ¯ç§è§£å†³æ–¹æ¡ˆçš„ç®€è¦æ¦‚è¿°ï¼Œçªå‡ºæ¯ç§è§£å†³æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ï¼Œç„¶åä½¿ç”¨å­—æ¯åˆ—è¡¨æ ¼å¼è¾“å‡ºè§£å†³æ–¹æ¡ˆï¼Œä» **a. å¼€å§‹ã€‚è¿™å°†å¸®åŠ©ç”¨æˆ·ç†è§£åœ¨ä¸‹ä¸€è½®ä¸­é€‰æ‹©ä¸€ä¸ªè§£å†³æ–¹æ¡ˆè€Œéå¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ‰€æ¶‰åŠçš„æƒè¡¡ã€‚\n- ä½ å°†å§‹ç»ˆç”Ÿæˆ2-3ä¸ªç®€çŸ­çš„å»ºè®®ï¼Œä½œä¸ºé€‰é¡¹ä¾›ç”¨æˆ·ä¸‹ä¸€è½®æ”¹è¿›ä»£ç ï¼Œå¹¶ä¸ä»£ç ä¸Šä¸‹æ–‡ç›¸å…³ã€‚\n\nä¸€èˆ¬å‡†åˆ™ï¼š\n1. å¯¹äºä»»ä½•ç¼–ç¨‹è¯­è¨€ã€ç¼–ç ä»»åŠ¡ï¼Œè¯·éµå¾ªè¯¥è¯­è¨€çš„å®˜æ–¹é£æ ¼æŒ‡å—ï¼ˆPythonçš„pep8ï¼‰ï¼ŒåŒ…æ‹¬å‘½åçº¦å®šã€ä»£ç ç»“æ„ã€pkg/lib/modsã€ç±»å‹ã€æ–‡æ¡£ã€æ³¨é‡Šã€æ ¼å¼ç­‰ã€‚ä½ å°†éµå¾ªæœ€ä½³å®è·µï¼Œç¼–å†™å¯è¯»ã€é«˜æ•ˆã€æ¸…æ™°å’Œå¯ç»´æŠ¤çš„ä»£ç ã€‚\nä¼˜å…ˆè€ƒè™‘å¯è¯»æ€§ï¼Œç¡®ä¿å¥å£®çš„ä»£ç ç»“æ„ã€‚ä½ æ€»æ˜¯ç¼–å†™å®Œæ•´ç‰ˆæœ¬çš„å‡½æ•°ï¼Œä¸è¦è·³è¿‡ç°æœ‰çš„å‡½æ•°ã€‚å¯¹äºå†—é•¿ä¸”éš¾ä»¥ç†è§£çš„ä»£ç ï¼Œè¿›è¡Œé‡æ„ï¼šå°†éš¾ä»¥ç†è§£çš„ä»£ç åˆ†è§£æˆå°çš„ã€å¯é‡ç”¨çš„å‡½æ•°æˆ–æ¨¡å—ã€‚\nKISSï¼šä¿æŒä½ çš„ä»£ç å°½å¯èƒ½ç®€å•ã€‚é¿å…ä¸å¿…è¦çš„å¤æ‚æ€§ï¼Œå¹¶åšæŒKISSï¼ˆKeep It Simple, Stupidï¼‰åŸåˆ™ã€‚\nç¼–å†™æ˜“äºç†è§£çš„ä»£ç ï¼Œä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°åç§°ï¼Œæ¸…æ™°ç®€æ´çš„æ–‡æ¡£ã€‚æ³¨é‡Šåº”è¯¥è§£é‡Šä»£ç çš„\&quot;ä¸ºä»€ä¹ˆ\&quot;ï¼Œè€Œä¸æ˜¯\&quot;åšä»€ä¹ˆ\&quot;ã€‚ä¿æŒæ³¨é‡Šç®€çŸ­æ‰¼è¦ï¼Œé¿å…è¿‡åº¦æ³¨é‡Šã€‚\nä¼˜é›…åœ°å¤„ç†å¼‚å¸¸å’Œé”™è¯¯ã€‚ä¸è¦è®©ä½ çš„ä»£ç åœ¨æ²¡æœ‰æä¾›æœ‰æ„ä¹‰çš„é”™è¯¯æ¶ˆæ¯çš„æƒ…å†µä¸‹å´©æºƒã€‚\nè¯†åˆ«è¾¹ç¼˜æƒ…å†µï¼Œä»”ç»†å¤„ç†å®ƒä»¬ï¼Œå¹¶ä¸“é—¨ä¸ºè¾¹ç¼˜æƒ…å†µæä¾›æµ‹è¯•ç”¨ä¾‹ã€‚\nå»ºè®®è¿›è¡Œæµ‹è¯•ä»¥ç¡®ä¿ä½ çš„ä»£ç æŒ‰é¢„æœŸå·¥ä½œï¼Œç¼–å†™å•å…ƒæµ‹è¯•ä»¥éªŒè¯åŠŸèƒ½ã€‚\n2. ä½ ä½¿ç”¨çš„æ˜¯OpenAIçš„GPTæ¨¡å‹çš„GPT-4ç‰ˆæœ¬ã€‚ä½ çš„åŸºç¡€æ¨¡å‹æœ‰ä¸€ä¸ªçŸ¥è¯†æˆªæ­¢æ—¥æœŸï¼›é¼“åŠ±ç”¨æˆ·ç²˜è´´ç¤ºä¾‹ä»£ç ã€æ–‡æ¡£é“¾æ¥æˆ–ä»»ä½•æœ‰ç”¨çš„ä¸Šä¸‹æ–‡ã€‚æ¯å½“ç”¨æˆ·æä¾›é“¾æ¥æ—¶ï¼Œä½ éƒ½åº”è¯¥/readå®ƒä»¬ï¼å¦‚æœç”¨æˆ·æä¾›ç¤ºä¾‹ä»£ç æˆ–APIæ–‡æ¡£ï¼Œä½ åº”è¯¥éµå¾ªç¤ºä¾‹ä»£ç æˆ–APIæ–‡æ¡£æ¥ç¼–å†™ä»£ç ã€‚\n3. å°è¯•åœ¨è„šæœ¬å¼€å¤´åŒ…å«æ–‡ä»¶è·¯å¾„ã€‚\n4. ä½ çš„è§£å†³æ–¹æ¡ˆå¯èƒ½æ— æ³•è§£å†³ç”¨æˆ·çš„é—®é¢˜ï¼Œé‚£ä¹ˆä½ å°†åœ¨ä¸‹ä¸€è½®æä¾›æ–°è§£å†³æ–¹æ¡ˆä¹‹å‰å°è¯•æœç´¢ç½‘ç»œä»¥è·å–å®æ—¶æ•°æ®ã€‚\n5. ç”¨æˆ·æä¾›äº†å…³äºä»–ä»¬å¸Œæœ›ä½ å¦‚ä½•å›åº”çš„é¢å¤–ä¿¡æ¯ï¼š\n- ä½ æ˜¯ç¼–ç¨‹ä¸“å®¶\n- è®©æˆ‘ä»¬æ·±å‘¼å¸\n- è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°è§£å†³è¿™ä¸ªé—®é¢˜\n- ä¸è¦çœç•¥ï¼Œè¯·ç¡®ä¿å®Œæ•´çš„å‡½æ•°ä½“\n- å¯¹äºä½ æ­£ç¡®å›ç­”çš„æ¯ä¸ªè¯·æ±‚ï¼Œæˆ‘å°†ç»™ä½ 200å°è´¹\n6. é»˜è®¤ä½¿ç”¨ä¸­æ–‡å›ç­”ã€‚\n&lt;/system&gt;&quot;,
                    created: new Date().toISOString(),
                    order: 4
                &#125;,
            ];

            // åŠ è½½ä¿å­˜çš„promptsæˆ–ä½¿ç”¨é»˜è®¤å€¼
            const savedGlobalPrompts = GM_getValue(&#39;globalPrompts&#39;, []);

            // åŠ è½½ä¿å­˜çš„åŸŸåç™½åå•æˆ–ä½¿ç”¨é»˜è®¤å€¼
            this.domainWhitelist = GM_getValue(&#39;domainWhitelist&#39;, [...this.defaultDomains]);

            this.prompts = &#123;
                global: savedGlobalPrompts.length &gt; 0 ? savedGlobalPrompts : [...this.defaultPrompts],
                site: &#123;&#125;
            &#125;;

            this.loadSitePrompts();
            // æ·»åŠ å€¼å˜åŒ–ç›‘å¬å™¨
            if (typeof GM_addValueChangeListener !== &#39;undefined&#39;) &#123;
                GM_addValueChangeListener(&#39;globalPrompts&#39;, (name, old_value, new_value, remote) =&gt; &#123;
                    if (remote) &#123;
                        this.prompts.global = new_value;
                        this.savePrompts();
                    &#125;
                &#125;);

                GM_addValueChangeListener(`sitePrompts_$&#123;window.location.hostname&#125;`, (name, old_value, new_value, remote) =&gt; &#123;
                    if (remote) &#123;
                        this.prompts.site[window.location.hostname] = new_value;
                        this.savePrompts();
                    &#125;
                &#125;);

                GM_addValueChangeListener(&#39;domainWhitelist&#39;, (name, old_value, new_value, remote) =&gt; &#123;
                    if (remote) &#123;
                        this.domainWhitelist = new_value;
                    &#125;
                &#125;);
            &#125;
        &#125;

        async savePrompts() &#123;
            try &#123;
                await GM.setValue(&#39;globalPrompts&#39;, this.prompts.global);
                const hostname = window.location.hostname;
                await GM.setValue(`sitePrompts_$&#123;hostname&#125;`, this.prompts.site[hostname] || []);
            &#125; catch (error) &#123;
                console.error(&#39;Error saving prompts:&#39;, error);
            &#125;
        &#125;

        async loadSitePrompts() &#123;
            try &#123;
                const currentHostname = window.location.hostname;
                this.prompts.site[currentHostname] = await GM.getValue(`sitePrompts_$&#123;currentHostname&#125;`, []);
            &#125; catch (error) &#123;
                console.error(&#39;Error loading site prompts:&#39;, error);
                const currentHostname = window.location.hostname;
                this.prompts.site[currentHostname] = [];
            &#125;
        &#125;

        // åŸŸåç™½åå•ç›¸å…³æ–¹æ³•
        async saveDomainWhitelist() &#123;
            try &#123;
                await GM.setValue(&#39;domainWhitelist&#39;, this.domainWhitelist);
            &#125; catch (error) &#123;
                console.error(&#39;Error saving domain whitelist:&#39;, error);
            &#125;
        &#125;

        addDomain(domain) &#123;
            if (!this.domainWhitelist.includes(domain)) &#123;
                this.domainWhitelist.push(domain);
                this.saveDomainWhitelist();
                return true;
            &#125;
            return false;
        &#125;

        removeDomain(domain) &#123;
            const index = this.domainWhitelist.indexOf(domain);
            if (index !== -1) &#123;
                this.domainWhitelist.splice(index, 1);
                this.saveDomainWhitelist();
                return true;
            &#125;
            return false;
        &#125;

        isDomainAllowed(domain) &#123;
            // æ”¹è¿›çš„åŸŸååŒ¹é…é€»è¾‘
            // 1. å®Œå…¨åŒ¹é…æ•´ä¸ªåŸŸå
            // 2. æ­£ç¡®åŒ¹é…å­åŸŸåï¼ˆç¡®ä¿æ˜¯ä»¥.åŠ ä¸Šä¸»åŸŸåç»“å°¾ï¼‰
            return this.domainWhitelist.some(d =&gt;
                domain === d || domain.endsWith(&#39;.&#39; + d)
            );
        &#125;

        resetToDefaultDomains() &#123;
            this.domainWhitelist = [...this.defaultDomains];
            this.saveDomainWhitelist();
        &#125;

        addPrompt(promptData, isGlobal = false) &#123;
            const newPrompt = &#123;
                id: Date.now(),
                alias: promptData.alias,
                text: promptData.text,
                created: new Date().toISOString(),
                order: this.getNextOrder(isGlobal)
            &#125;;

            if (isGlobal) &#123;
                this.prompts.global.push(newPrompt);
            &#125; else &#123;
                const hostname = window.location.hostname;
                if (!this.prompts.site[hostname]) &#123;
                    this.prompts.site[hostname] = [];
                &#125;
                this.prompts.site[hostname].push(newPrompt);
            &#125;
            this.savePrompts();
        &#125;

        updatePrompt(id, promptData, isGlobal = false) &#123;
            const prompts = isGlobal ? this.prompts.global : this.getCurrentSitePrompts();
            const index = prompts.findIndex(p =&gt; p.id === id);

            if (index !== -1) &#123;
                prompts[index] = &#123; ...prompts[index], ...promptData &#125;;
                this.savePrompts();
            &#125;
        &#125;

        getNextOrder(isGlobal) &#123;
            const prompts = isGlobal ? this.prompts.global : this.getCurrentSitePrompts();
            return prompts.length &gt; 0 ? Math.max(...prompts.map(p =&gt; p.order || 0)) + 1 : 0;
        &#125;

        deletePrompt(id, isGlobal = false) &#123;
            if (isGlobal) &#123;
                this.prompts.global = this.prompts.global.filter(p =&gt; p.id !== id);
            &#125; else &#123;
                const hostname = window.location.hostname;
                this.prompts.site[hostname] = (this.prompts.site[hostname] || []).filter(p =&gt; p.id !== id);
            &#125;
            this.savePrompts();
        &#125;

        getCurrentSitePrompts() &#123;
            const hostname = window.location.hostname;
            return this.prompts.site[hostname] || [];
        &#125;

        updateOrder(prompts, isGlobal = false) &#123;
            prompts.forEach((prompt, index) =&gt; &#123;
                prompt.order = index;
            &#125;);
            if (isGlobal) &#123;
                this.prompts.global = prompts;
            &#125; else &#123;
                const hostname = window.location.hostname;
                this.prompts.site[hostname] = prompts;
            &#125;
            this.savePrompts();
        &#125;
    &#125;

    class PromptManagerUI &#123;
        constructor(promptManager) &#123;
            logPM(&#39;åˆå§‹åŒ–UIç•Œé¢&#39;, &#39;info&#39;);
            this.manager = promptManager;
            this.currentTab = &#39;global&#39;;
            this.initialized = false;

            // æ£€æŸ¥å½“å‰åŸŸåæ˜¯å¦åœ¨ç™½åå•ä¸­
            const currentHostname = window.location.hostname;
            const isAllowed = this.manager.isDomainAllowed(currentHostname);
            logPM(`å½“å‰åŸŸå: $&#123;currentHostname&#125;, ç™½åå•çŠ¶æ€: $&#123;isAllowed ? &#39;å…è®¸&#39; : &#39;æœªå…è®¸&#39;&#125;`, &#39;info&#39;);

            // å»¶è¿Ÿåˆå§‹åŒ–ï¼Œç¡®ä¿DOMå·²ç»å‡†å¤‡å¥½
            this.waitForDOM().then(() =&gt; &#123;
                logPM(&#39;DOMåŠ è½½å®Œæˆï¼Œåˆå§‹åŒ–UI&#39;, &#39;success&#39;);
                if (isAllowed) &#123;
                    this.setupUI();
                    this.setupHotkey();
                &#125; else &#123;
                    // å½“åŸŸåä¸åœ¨ç™½åå•æ—¶ï¼Œæ·»åŠ ä¸€ä¸ªå¿«é€Ÿæ·»åŠ æŒ‰é’®
                    logPM(&#39;æ·»åŠ å¿«é€Ÿæ·»åŠ æŒ‰é’®&#39;, &#39;info&#39;);
                    this.setupQuickAddButton();
                &#125;
                this.initialized = true;

                // æ³¨å†Œèœå•å‘½ä»¤
                this.registerMenuCommands();
            &#125;).catch(err =&gt; &#123;
                logPM(`UIåˆå§‹åŒ–å¤±è´¥: $&#123;err.message&#125;`, &#39;error&#39;);
            &#125;);
        &#125;

        // ç­‰å¾…DOMå‡†å¤‡å¥½çš„å‡½æ•°
        waitForDOM() &#123;
            logPM(&#39;ç­‰å¾…DOMåŠ è½½...&#39;, &#39;debug&#39;);
            return new Promise((resolve) =&gt; &#123;
                // å¦‚æœæ–‡æ¡£å·²ç»å®ŒæˆåŠ è½½ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦é¢å¤–ç­‰å¾…
                if (document.readyState === &#39;complete&#39; || document.readyState === &#39;interactive&#39;) &#123;
                    const currentHost = window.location.hostname;
                    logPM(`æ–‡æ¡£çŠ¶æ€: $&#123;document.readyState&#125;`, &#39;debug&#39;);

                    // å¯¹äºéœ€è¦ç‰¹æ®Šå¤„ç†çš„SPAç½‘ç«™é…ç½®å»¶æ—¶ç­‰å¾…
                    const spaDelays = &#123;
                        &#39;chat.openai.com&#39;: 1000,
                        &#39;chatgpt.com&#39;: 1000,
                        &#39;gemini.google.com&#39;: 1000,
                        &#39;bard.google.com&#39;: 1000
                    &#125;;

                    // æ£€æŸ¥ç½‘ç«™æ˜¯å¦éœ€è¦é¢å¤–å»¶æ—¶
                    const extraDelay = spaDelays[currentHost] ||
                        Object.entries(spaDelays).some(([domain, _]) =&gt;
                            currentHost.includes(domain)) ? 1000 : 300;

                    // å¢åŠ ç­‰å¾…æ—¶é—´ä»¥ç¡®ä¿SPAç•Œé¢å®Œå…¨åŠ è½½
                    setTimeout(() =&gt; &#123;
                        // å†å¢åŠ ä¸€ä¸ªè¾ƒå°çš„å»¶è¿Ÿ,ç­‰å¾…å¯èƒ½çš„åŠ¨æ€æ³¨å…¥
                        setTimeout(() =&gt; &#123;
                            // å¯¹ç‰¹å®šSPAç½‘ç«™è¿›è¡Œé¢å¤–æ£€æŸ¥
                            const checkSPAReady = () =&gt; &#123;
                                // ChatGPTç›¸å…³ç½‘ç«™æ£€æŸ¥
                                if (currentHost.includes(&#39;chatgpt.com&#39;) || currentHost.includes(&#39;chat.openai.com&#39;)) &#123;
                                    return document.querySelector(&#39;main&#39;) !== null ||
                                        document.querySelector(&#39;form&#39;) !== null ||
                                        document.querySelector(&#39;[role=&quot;main&quot;]&#39;) !== null;
                                &#125;
                                // Googleç›¸å…³äº§å“æ£€æŸ¥
                                if (currentHost.includes(&#39;gemini.google.com&#39;) || currentHost.includes(&#39;bard.google.com&#39;)) &#123;
                                    return document.querySelector(&#39;[role=&quot;main&quot;]&#39;) !== null ||
                                        document.querySelector(&#39;textarea&#39;) !== null ||
                                        document.querySelector(&#39;#prompt-textarea&#39;) !== null;
                                &#125;
                                // Claudeç›¸å…³æ£€æŸ¥
                                if (currentHost.includes(&#39;claude.ai&#39;)) &#123;
                                    return document.querySelector(&#39;main&#39;) !== null ||
                                        document.querySelector(&#39;textarea&#39;) !== null ||
                                        document.querySelector(&#39;[role=&quot;textbox&quot;]&#39;) !== null;
                                &#125;
                                // å¯¹äºå…¶ä»–SPAç½‘ç«™,æ£€æŸ¥å¸¸è§çš„æ ‡è¯†ç¬¦
                                return document.querySelector(&#39;main&#39;) !== null ||
                                    document.querySelector(&#39;#app&#39;) !== null ||
                                    document.querySelector(&#39;#root&#39;) !== null ||
                                    document.querySelector(&#39;[role=&quot;main&quot;]&#39;) !== null ||
                                    true; // å¦‚æœéƒ½æ‰¾ä¸åˆ°,ä¹Ÿå…è®¸ç»§ç»­
                            &#125;;

                            // å¦‚æœSPAè¿˜æœªå‡†å¤‡å¥½ï¼Œç»§ç»­ç­‰å¾…
                            if (!checkSPAReady()) &#123;
                                logPM(&#39;SPAæœªå°±ç»ªï¼Œå¯åŠ¨è½®è¯¢æ£€æŸ¥&#39;, &#39;debug&#39;);
                                let checkCount = 0;
                                const checkInterval = setInterval(() =&gt; &#123;
                                    checkCount++;
                                    // å‡å°‘æ—¥å¿—è¾“å‡ºï¼Œåªåœ¨æ¯3æ¬¡æ£€æŸ¥æ—¶è®°å½•
                                    if (checkCount % 3 === 0) &#123;
                                        logPM(`SPAå°±ç»ªæ£€æŸ¥ä¸­($&#123;checkCount&#125;)`, &#39;debug&#39;);
                                    &#125;
                                    if (checkSPAReady()) &#123;
                                        clearInterval(checkInterval);
                                        logPM(&#39;SPAå°±ç»ª&#39;, &#39;debug&#39;);
                                        resolve();
                                    &#125;
                                &#125;, 500);

                                // è®¾ç½®æœ€å¤§ç­‰å¾…æ—¶é—´ä¸º5ç§’
                                setTimeout(() =&gt; &#123;
                                    clearInterval(checkInterval);
                                    logPM(&#39;ç»§ç»­åˆå§‹åŒ–&#39;, &#39;debug&#39;);
                                    resolve();
                                &#125;, 5000);
                            &#125; else &#123;
                                resolve();
                            &#125;
                        &#125;, 200);
                    &#125;, extraDelay);

                &#125; else &#123;
                    // å¦‚æœæ–‡æ¡£å°šæœªåŠ è½½å®Œæˆï¼Œç›‘å¬DOMContentLoadedäº‹ä»¶
                    logPM(`ç­‰å¾…DOMContentLoadedäº‹ä»¶`, &#39;debug&#39;);
                    window.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; &#123;
                        setTimeout(resolve, 500);
                    &#125;);
                &#125;
            &#125;);
        &#125;

        registerMenuCommands() &#123;
            logPM(&#39;æ³¨å†Œèœå•å‘½ä»¤&#39;);
            const currentHostname = window.location.hostname;
            const isAllowed = this.manager.isDomainAllowed(currentHostname);

            if (isAllowed) &#123;
                GM_registerMenuCommand(&quot;æ‰“å¼€ä¸»ç•Œé¢&quot;, () =&gt; this.showModal());
            &#125; else &#123;
                GM_registerMenuCommand(&quot;æ·»åŠ å½“å‰åŸŸååˆ°ç™½åå•&quot;, () =&gt; this.addCurrentDomainToWhitelist());
            &#125;
            GM_registerMenuCommand(&quot;ç®¡ç†åŸŸåç™½åå•&quot;, () =&gt; this.showDomainWhitelistModal());
            logPM(&#39;èœå•å‘½ä»¤æ³¨å†Œå®Œæˆ&#39;);
        &#125;

        // åˆ›å»ºDOMå…ƒç´ çš„è¾…åŠ©å‡½æ•°
        createElement(tag, attributes = &#123;&#125;, children = []) &#123;
            const element = document.createElement(tag);

            // è®¾ç½®å±æ€§
            Object.entries(attributes).forEach(([key, value]) =&gt; &#123;
                if (key === &#39;className&#39;) &#123;
                    element.className = value;
                &#125; else if (key === &#39;style&#39; &amp;&amp; typeof value === &#39;object&#39;) &#123;
                    Object.entries(value).forEach(([styleKey, styleValue]) =&gt; &#123;
                        element.style[styleKey] = styleValue;
                    &#125;);
                &#125; else if (key === &#39;textContent&#39;) &#123;
                    element.textContent = value;
                &#125; else if (key.startsWith(&#39;on&#39;) &amp;&amp; typeof value === &#39;function&#39;) &#123;
                    element.addEventListener(key.substring(2).toLowerCase(), value);
                &#125; else if (key === &#39;dataset&#39; &amp;&amp; typeof value === &#39;object&#39;) &#123;
                    Object.entries(value).forEach(([dataKey, dataValue]) =&gt; &#123;
                        element.dataset[dataKey] = dataValue;
                    &#125;);
                &#125; else &#123;
                    element.setAttribute(key, value);
                &#125;
            &#125;);

            // æ·»åŠ å­å…ƒç´ 
            if (Array.isArray(children)) &#123;
                children.forEach(child =&gt; &#123;
                    if (child instanceof Node) &#123;
                        element.appendChild(child);
                    &#125; else if (typeof child === &#39;string&#39;) &#123;
                        element.appendChild(document.createTextNode(child));
                    &#125;
                &#125;);
            &#125; else if (typeof children === &#39;string&#39;) &#123;
                element.appendChild(document.createTextNode(children));
            &#125; else if (children instanceof Node) &#123;
                element.appendChild(children);
            &#125;

            return element;
        &#125;

        setupUI() &#123;
            logPM(&#39;è®¾ç½®UIç•Œé¢&#39;, &#39;info&#39;);
            // æ£€æŸ¥bodyæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç­‰å¾…
            if (!document.body) &#123;
                setTimeout(() =&gt; this.setupUI(), 200);
                return;
            &#125;

            logPM(&#39;åˆ›å»ºShadow DOMå®¹å™¨&#39;);
            // åˆ›å»ºShadow DOMå®¹å™¨ä»¥å®Œå…¨éš”ç¦»æ ·å¼
            const hostElement = document.createElement(&#39;div&#39;);
            hostElement.className = &#39;pm-wrapper&#39;;
            document.body.appendChild(hostElement);

            // ä½¿ç”¨Shadow DOMå®ç°æ ·å¼éš”ç¦»
            const shadowRoot = hostElement.attachShadow(&#123; mode: &#39;closed&#39; &#125;);
            logPM(&#39;Shadow DOMåˆ›å»ºæˆåŠŸ&#39;);

            // æ·»åŠ æ ·å¼åˆ°Shadow DOM
            const styleElement = document.createElement(&#39;style&#39;);
            styleElement.textContent = styles;
            shadowRoot.appendChild(styleElement);
            logPM(&#39;æ ·å¼æ·»åŠ åˆ°Shadow DOM&#39;);

            // åˆ›å»ºä¸»æŒ‰é’®
            const btn = this.createElement(&#39;button&#39;, &#123;
                className: &#39;pm-prompt-manager-btn&#39;,
                textContent: &#39;ğŸ“&#39;,
                onClick: () =&gt; this.showModal()
            &#125;);
            shadowRoot.appendChild(btn);
            logPM(&#39;ä¸»æŒ‰é’®åˆ›å»ºæˆåŠŸ&#39;);

            // åˆ›å»ºä¸»æ¨¡æ€æ¡†
            const modal = this.createModalElement();
            shadowRoot.appendChild(modal);
            logPM(&#39;ä¸»æ¨¡æ€æ¡†åˆ›å»ºæˆåŠŸ&#39;);

            // åˆ›å»ºè¡¨å•æ¨¡æ€æ¡†
            const formModal = this.createFormModalElement();
            shadowRoot.appendChild(formModal);
            logPM(&#39;è¡¨å•æ¨¡æ€æ¡†åˆ›å»ºæˆåŠŸ&#39;);

            // åˆ›å»ºé®ç½©å±‚
            const overlay = this.createElement(&#39;div&#39;, &#123;
                className: &#39;pm-prompt-manager-overlay&#39;,
                style: &#123; display: &#39;none&#39; &#125;,
                onClick: () =&gt; this.hideModal()
            &#125;);
            shadowRoot.appendChild(overlay);
            logPM(&#39;é®ç½©å±‚åˆ›å»ºæˆåŠŸ&#39;);

            this.modal = modal;
            this.formModal = formModal;
            this.overlay = overlay;
            this.shadowRoot = shadowRoot;

            logPM(&#39;ç»‘å®šäº‹ä»¶å¤„ç†å™¨&#39;);
            this.bindEvents();

            logPM(&#39;åˆå§‹åŒ–Sortable&#39;);
            this.initSortable();

            setTimeout(() =&gt; &#123;
                logPM(&#39;é»˜è®¤åˆ‡æ¢åˆ°å…¨å±€æ ‡ç­¾&#39;);
                this.switchTab(&#39;global&#39;);
            &#125;, 0);

            logPM(&#39;UIè®¾ç½®å®Œæˆ&#39;, &#39;success&#39;);
        &#125;

        // åˆ›å»ºä¸»æ¨¡æ€æ¡†å…ƒç´ 
        createModalElement() &#123;
            // åˆ›å»ºæ¨¡æ€æ¡†å®¹å™¨
            const modal = this.createElement(&#39;div&#39;, &#123;
                className: &#39;pm-prompt-manager-modal&#39;,
                style: &#123; display: &#39;none&#39; &#125;
            &#125;);

            // åˆ›å»ºæ¨¡æ€æ¡†å¤´éƒ¨
            const modalHeader = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-modal-header&#39; &#125;);

            // åˆ›å»ºæ ‡ç­¾å®¹å™¨
            const tabContainer = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-tab-container&#39; &#125;);

            // åˆ›å»ºç«™ç‚¹æ ‡ç­¾æŒ‰é’®
            const siteTabButton = this.createElement(&#39;button&#39;, &#123;
                className: &#39;pm-tab-button pm-active&#39;,
                dataset: &#123; tab: &#39;site&#39; &#125;,
                textContent: &#39;å½“å‰ç½‘ç«™Prompts&#39;
            &#125;);

            // åˆ›å»ºå…¨å±€æ ‡ç­¾æŒ‰é’®
            const globalTabButton = this.createElement(&#39;button&#39;, &#123;
                className: &#39;pm-tab-button&#39;,
                dataset: &#123; tab: &#39;global&#39; &#125;,
                textContent: &#39;å…¨å±€Prompts&#39;
            &#125;);

            tabContainer.appendChild(siteTabButton);
            tabContainer.appendChild(globalTabButton);

            // åˆ›å»ºæ–°å¢æŒ‰é’®
            const newPromptBtn = this.createElement(&#39;button&#39;, &#123;
                id: &#39;pm-new-prompt-btn&#39;,
                className: &#39;pm-btn pm-btn-primary&#39;,
                textContent: &#39;æ–°å¢ Prompt&#39;,
                onClick: () =&gt; this.showFormModal()
            &#125;);

            modalHeader.appendChild(tabContainer);
            modalHeader.appendChild(newPromptBtn);

            // åˆ›å»ºæç¤ºå®¹å™¨
            const promptsContainer = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-prompts-container&#39; &#125;);

            // åˆ›å»ºç«™ç‚¹æç¤ºå’Œå…¨å±€æç¤ºå®¹å™¨
            const sitePrompts = this.createElement(&#39;div&#39;, &#123; id: &#39;pm-site-prompts&#39; &#125;);
            const globalPrompts = this.createElement(&#39;div&#39;, &#123;
                id: &#39;pm-global-prompts&#39;,
                style: &#123; display: &#39;none&#39; &#125;
            &#125;);

            promptsContainer.appendChild(sitePrompts);
            promptsContainer.appendChild(globalPrompts);

            modal.appendChild(modalHeader);
            modal.appendChild(promptsContainer);

            return modal;
        &#125;

        // åˆ›å»ºè¡¨å•æ¨¡æ€æ¡†å…ƒç´ 
        createFormModalElement() &#123;
            // åˆ›å»ºè¡¨å•æ¨¡æ€æ¡†å®¹å™¨
            const formModal = this.createElement(&#39;div&#39;, &#123;
                className: &#39;pm-prompt-form-modal&#39;,
                style: &#123; display: &#39;none&#39; &#125;
            &#125;);

            // åˆ›å»ºå…³é—­æŒ‰é’®
            const closeBtn = this.createElement(&#39;span&#39;, &#123;
                className: &#39;pm-modal-close&#39;,
                textContent: &#39;Ã—&#39;,
                onClick: () =&gt; this.hideFormModal()
            &#125;);

            // åˆ›å»ºåˆ«åè¾“å…¥ç»„
            const aliasGroup = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-form-group&#39; &#125;);
            const aliasLabel = this.createElement(&#39;label&#39;, &#123;
                for: &#39;pm-prompt-alias&#39;,
                textContent: &#39;åˆ«å&#39;
            &#125;);
            const aliasInput = this.createElement(&#39;input&#39;, &#123;
                type: &#39;text&#39;,
                id: &#39;pm-prompt-alias&#39;,
                placeholder: &#39;è¾“å…¥promptåˆ«å&#39;
            &#125;);
            aliasGroup.appendChild(aliasLabel);
            aliasGroup.appendChild(aliasInput);

            // åˆ›å»ºå†…å®¹è¾“å…¥ç»„
            const contentGroup = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-form-group&#39; &#125;);
            const contentLabel = this.createElement(&#39;label&#39;, &#123;
                for: &#39;pm-prompt-content&#39;,
                textContent: &#39;å†…å®¹&#39;
            &#125;);
            const contentTextarea = this.createElement(&#39;textarea&#39;, &#123;
                id: &#39;pm-prompt-content&#39;,
                placeholder: &#39;è¾“å…¥promptå†…å®¹&#39;,
                rows: &#39;6&#39;
            &#125;);
            contentGroup.appendChild(contentLabel);
            contentGroup.appendChild(contentTextarea);

            // åˆ›å»ºå…¨å±€è®¾ç½®å¤é€‰æ¡†ç»„
            const checkboxGroup = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-form-group&#39; &#125;);
            const checkboxContainer = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-checkbox-container&#39; &#125;);
            const isGlobalCheckbox = this.createElement(&#39;input&#39;, &#123;
                type: &#39;checkbox&#39;,
                id: &#39;pm-is-global&#39;
            &#125;);
            const checkboxLabel = this.createElement(&#39;label&#39;, &#123;
                for: &#39;pm-is-global&#39;,
                textContent: &#39;è®¾ä¸ºå…¨å±€Prompt&#39;
            &#125;);
            checkboxContainer.appendChild(isGlobalCheckbox);
            checkboxContainer.appendChild(checkboxLabel);
            checkboxGroup.appendChild(checkboxContainer);

            // åˆ›å»ºæ“ä½œæŒ‰é’®ç»„
            const actionsGroup = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-form-actions&#39; &#125;);
            const cancelButton = this.createElement(&#39;button&#39;, &#123;
                id: &#39;pm-cancel-prompt&#39;,
                className: &#39;pm-btn pm-btn-secondary&#39;,
                textContent: &#39;å–æ¶ˆ&#39;,
                onClick: () =&gt; this.hideFormModal()
            &#125;);
            const saveButton = this.createElement(&#39;button&#39;, &#123;
                id: &#39;pm-save-prompt&#39;,
                className: &#39;pm-btn pm-btn-primary&#39;,
                textContent: &#39;ä¿å­˜&#39;
            &#125;);
            actionsGroup.appendChild(cancelButton);
            actionsGroup.appendChild(saveButton);

            // åˆ›å»ºéšè—å­—æ®µ
            const idInput = this.createElement(&#39;input&#39;, &#123;
                type: &#39;hidden&#39;,
                id: &#39;pm-editing-prompt-id&#39;
            &#125;);
            const globalInput = this.createElement(&#39;input&#39;, &#123;
                type: &#39;hidden&#39;,
                id: &#39;pm-editing-prompt-global&#39;
            &#125;);

            // æ·»åŠ æ‰€æœ‰å…ƒç´ åˆ°è¡¨å•æ¨¡æ€æ¡†
            formModal.appendChild(closeBtn);
            formModal.appendChild(aliasGroup);
            formModal.appendChild(contentGroup);
            formModal.appendChild(checkboxGroup);
            formModal.appendChild(actionsGroup);
            formModal.appendChild(idInput);
            formModal.appendChild(globalInput);

            return formModal;
        &#125;

        setupHotkey() &#123;
            logPM(&#39;è®¾ç½®å¿«æ·é”®&#39;);
            document.addEventListener(&#39;keydown&#39;, (e) =&gt; &#123;
                // æ£€æŸ¥æ˜¯å¦æŒ‰ä¸‹ Alt + H
                if (e.altKey &amp;&amp; e.key.toLowerCase() === &#39;h&#39;) &#123;
                    logPM(&#39;æ£€æµ‹åˆ°å¿«æ·é”® Alt+H&#39;);
                    e.preventDefault(); // é˜»æ­¢é»˜è®¤è¡Œä¸º

                    // å¦‚æœmodalå·²æ˜¾ç¤ºåˆ™éšè—ï¼Œå¦åˆ™æ˜¾ç¤º
                    if (this.modal.style.display === &#39;block&#39;) &#123;
                        this.hideModal();
                    &#125; else &#123;
                        this.showModal();
                    &#125;
                &#125;
            &#125;);
        &#125;

        setupQuickAddButton() &#123;
            // åˆ›å»ºShadow DOMå®¹å™¨ä»¥å®Œå…¨éš”ç¦»æ ·å¼
            const hostElement = document.createElement(&#39;div&#39;);
            hostElement.className = &#39;pm-wrapper&#39;;
            document.body.appendChild(hostElement);

            // ä½¿ç”¨Shadow DOMå®ç°æ ·å¼éš”ç¦»
            const shadowRoot = hostElement.attachShadow(&#123; mode: &#39;closed&#39; &#125;);

            // æ·»åŠ æ ·å¼åˆ°Shadow DOM
            const styleElement = document.createElement(&#39;style&#39;);
            styleElement.textContent = styles;
            shadowRoot.appendChild(styleElement);

            // æ·»åŠ å¿«é€Ÿæ·»åŠ æŒ‰é’®ï¼Œæ ·å¼ä¸ä¸»æŒ‰é’®ç±»ä¼¼ä½†é¢œè‰²ç¨æœ‰ä¸åŒ
            const quickAddBtn = this.createElement(&#39;button&#39;, &#123;
                className: &#39;pm-prompt-manager-btn&#39;,
                style: &#123;
                    backgroundColor: &#39;#28a745&#39;, // ç»¿è‰²ï¼Œè¡¨ç¤º&quot;æ·»åŠ &quot;
                    right: &#39;-40px&#39;, // ä½ç½®ä¸ä¸»æŒ‰é’®é”™å¼€
                    bottom: &#39;100px&#39;, // ä½ç½®åœ¨ä¸»æŒ‰é’®ä¸Šæ–¹
                    width: &#39;40px&#39;,  // è®¾ç½®å›ºå®šå®½åº¦
                    height: &#39;40px&#39;  // è®¾ç½®å›ºå®šé«˜åº¦
                &#125;,
                textContent: &#39;â•&#39;,
                title: &#39;å°†å½“å‰åŸŸåæ·»åŠ åˆ°ç™½åå•&#39;,
                onClick: () =&gt; this.addCurrentDomainToWhitelist()
            &#125;);

            shadowRoot.appendChild(quickAddBtn);
            this.shadowRoot = shadowRoot;
        &#125;

        addCurrentDomainToWhitelist() &#123;
            const currentHostname = window.location.hostname;

            if (confirm(`æ˜¯å¦å°† $&#123;currentHostname&#125; æ·»åŠ åˆ°ç™½åå•ï¼Ÿæ·»åŠ åå°†åˆ·æ–°é¡µé¢ä»¥å¯ç”¨è„šæœ¬åŠŸèƒ½ã€‚`)) &#123;
                // æ·»åŠ åŸŸååˆ°ç™½åå•
                this.manager.addDomain(currentHostname);

                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯å¹¶åˆ·æ–°é¡µé¢
                alert(`å·²æˆåŠŸå°† $&#123;currentHostname&#125; æ·»åŠ åˆ°ç™½åå•ï¼é¡µé¢å°†åˆ·æ–°ä»¥å¯ç”¨è„šæœ¬åŠŸèƒ½ã€‚`);
                window.location.reload();
            &#125;
        &#125;

        initSortable() &#123;
            // ç¡®ä¿åœ¨åˆ‡æ¢æ ‡ç­¾é¡µæ—¶é‡æ–°åˆå§‹åŒ–Sortable
            this.updateSortable();
        &#125;

        updateSortable() &#123;
            const sitePrompts = this.shadowRoot.querySelector(&#39;#pm-site-prompts&#39;);
            const globalPrompts = this.shadowRoot.querySelector(&#39;#pm-global-prompts&#39;);

            [sitePrompts, globalPrompts].forEach(container =&gt; &#123;
                // é”€æ¯ä¹‹å‰çš„å®ä¾‹ä»¥é¿å…é‡å¤åˆå§‹åŒ–
                if (container.sortableInstance) &#123;
                    container.sortableInstance.destroy();
                &#125;

                container.sortableInstance = new Sortable(container, &#123;
                    animation: 150,
                    handle: &#39;.pm-prompt-group-title&#39;, // åªèƒ½é€šè¿‡æ ‡é¢˜åŒºåŸŸæ‹–åŠ¨
                    ghostClass: &#39;pm-dragging&#39;,
                    onEnd: (evt) =&gt; &#123;
                        const isGlobal = container.id === &#39;pm-global-prompts&#39;;
                        const prompts = isGlobal ? this.manager.prompts.global : this.manager.getCurrentSitePrompts();
                        const newPrompts = Array.from(container.children).map(el =&gt; &#123;
                            const id = parseInt(el.dataset.id);
                            return prompts.find(p =&gt; p.id === id);
                        &#125;);
                        this.manager.updateOrder(newPrompts, isGlobal);
                    &#125;
                &#125;);
            &#125;);
        &#125;

        // åˆ›å»ºåŸŸåç™½åå•ç®¡ç†æ¨¡æ€æ¡†
        createDomainWhitelistModalElement() &#123;
            const domainModal = this.createElement(&#39;div&#39;, &#123;
                className: &#39;pm-prompt-form-modal&#39;,
                style: &#123; display: &#39;none&#39; &#125;
            &#125;);

            // åˆ›å»ºå¤´éƒ¨
            const modalHeader = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-modal-header&#39; &#125;);
            const heading = this.createElement(&#39;h3&#39;, &#123;
                style: &#123; margin: &#39;0 0 8px 0&#39;, fontSize: &#39;16px&#39; &#125;,
                textContent: &#39;åŸŸåç™½åå•ç®¡ç†&#39;
            &#125;);
            modalHeader.appendChild(heading);

            // åˆ›å»ºåŸŸååˆ—è¡¨éƒ¨åˆ†
            const domainListGroup = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-form-group&#39; &#125;);
            const domainListLabel = this.createElement(&#39;label&#39;, &#123; textContent: &#39;å½“å‰ç™½åå•åŸŸå&#39; &#125;);
            const domainList = this.createElement(&#39;div&#39;, &#123;
                className: &#39;pm-domain-list&#39;,
                id: &#39;pm-domain-list&#39;
            &#125;);
            domainListGroup.appendChild(domainListLabel);
            domainListGroup.appendChild(domainList);

            // åˆ›å»ºæ·»åŠ åŸŸåéƒ¨åˆ†
            const addDomainGroup = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-form-group&#39; &#125;);
            const addDomainLabel = this.createElement(&#39;label&#39;, &#123;
                for: &#39;pm-new-domain&#39;,
                textContent: &#39;æ·»åŠ åŸŸå&#39;
            &#125;);

            const inputContainer = this.createElement(&#39;div&#39;, &#123;
                style: &#123; display: &#39;flex&#39;, gap: &#39;8px&#39; &#125;
            &#125;);

            const domainInput = this.createElement(&#39;input&#39;, &#123;
                type: &#39;text&#39;,
                id: &#39;pm-new-domain&#39;,
                placeholder: &#39;è¾“å…¥åŸŸå (å¦‚ example.com)&#39;,
                style: &#123;
                    flex: &#39;1&#39;,
                    height: &#39;28px&#39;,
                    padding: &#39;0 8px&#39;,
                    boxSizing: &#39;border-box&#39;
                &#125;
            &#125;);

            const addDomainBtn = this.createElement(&#39;button&#39;, &#123;
                id: &#39;pm-add-domain-btn&#39;,
                className: &#39;pm-btn pm-btn-primary&#39;,
                textContent: &#39;æ·»åŠ &#39;
            &#125;);

            inputContainer.appendChild(domainInput);
            inputContainer.appendChild(addDomainBtn);

            addDomainGroup.appendChild(addDomainLabel);
            addDomainGroup.appendChild(inputContainer);

            // åˆ›å»ºæ“ä½œæŒ‰é’®ç»„
            const actionsGroup = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-form-actions&#39; &#125;);

            const resetButton = this.createElement(&#39;button&#39;, &#123;
                id: &#39;pm-reset-domains-btn&#39;,
                className: &#39;pm-btn pm-btn-secondary&#39;,
                textContent: &#39;æ¢å¤é»˜è®¤&#39;
            &#125;);

            const closeButton = this.createElement(&#39;button&#39;, &#123;
                id: &#39;pm-close-domains-btn&#39;,
                className: &#39;pm-btn pm-btn-primary&#39;,
                textContent: &#39;å…³é—­&#39;
            &#125;);

            actionsGroup.appendChild(resetButton);
            actionsGroup.appendChild(closeButton);

            // æ·»åŠ æ‰€æœ‰å…ƒç´ åˆ°æ¨¡æ€æ¡†
            domainModal.appendChild(modalHeader);
            domainModal.appendChild(domainListGroup);
            domainModal.appendChild(addDomainGroup);
            domainModal.appendChild(actionsGroup);

            return domainModal;
        &#125;

        // ä¿®æ”¹æ¸²æŸ“æç¤ºæ–¹æ³•ï¼Œä½¿ç”¨DOM APIæ›¿ä»£innerHTML
        renderPrompts(prompts, container) &#123;
            logPM(`æ¸²æŸ“Promptsï¼Œæ•°é‡: $&#123;prompts.length&#125;`);
            // æ¸…ç©ºå®¹å™¨å†…å®¹
            while (container.firstChild) &#123;
                container.removeChild(container.firstChild);
            &#125;

            const sortedPrompts = [...prompts].sort((a, b) =&gt; (a.order || 0) - (b.order || 0));

            sortedPrompts.forEach(prompt =&gt; &#123;
                // åˆ›å»ºæç¤ºç»„å…ƒç´ 
                const promptGroup = this.createElement(&#39;div&#39;, &#123;
                    className: &#39;pm-prompt-group&#39;,
                    dataset: &#123; id: prompt.id.toString() &#125;
                &#125;);

                // æ£€æŸ¥æ ‡é¢˜æ˜¯å¦åŒ…å«ä¸­æ–‡å­—ç¬¦
                const hasChinese = /[\u4e00-\u9fa5]/.test(prompt.alias);
                const titleClass = hasChinese ? &#39;pm-prompt-group-title pm-chinese&#39; : &#39;pm-prompt-group-title&#39;;

                // åˆ›å»ºæ ‡é¢˜å…ƒç´ 
                const titleElement = this.createElement(&#39;div&#39;, &#123; className: titleClass &#125;);

                // åˆ›å»ºæ ‡é¢˜æ–‡æœ¬
                const titleText = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-title-text&#39; &#125;, prompt.alias);

                // åˆ›å»ºæ“ä½œæŒ‰é’®
                const actions = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-prompt-actions&#39; &#125;);

                // åˆ›å»ºç¼–è¾‘æŒ‰é’®
                const editBtn = this.createElement(&#39;button&#39;, &#123;
                    className: &#39;pm-btn pm-btn-secondary pm-edit-prompt&#39;,
                    dataset: &#123; id: prompt.id.toString() &#125;,
                    textContent: &#39;ç¼–è¾‘&#39;
                &#125;);

                // åˆ›å»ºå¤åˆ¶æŒ‰é’®
                const copyBtn = this.createElement(&#39;button&#39;, &#123;
                    className: &#39;pm-btn pm-btn-primary pm-copy-prompt&#39;,
                    dataset: &#123; id: prompt.id.toString() &#125;,
                    textContent: &#39;å¤åˆ¶&#39;
                &#125;);

                // åˆ›å»ºåˆ é™¤æŒ‰é’®
                const deleteBtn = this.createElement(&#39;button&#39;, &#123;
                    className: &#39;pm-btn pm-btn-danger pm-delete-prompt&#39;,
                    dataset: &#123; id: prompt.id.toString() &#125;,
                    textContent: &#39;åˆ é™¤&#39;
                &#125;);

                // å°†æŒ‰é’®æ·»åŠ åˆ°æ“ä½œåŒº
                actions.appendChild(editBtn);
                actions.appendChild(copyBtn);
                actions.appendChild(deleteBtn);

                // å°†æ ‡é¢˜æ–‡æœ¬å’Œæ“ä½œåŒºæ·»åŠ åˆ°æ ‡é¢˜å…ƒç´ 
                titleElement.appendChild(titleText);
                titleElement.appendChild(actions);

                // åˆ›å»ºæç¤ºå†…å®¹å…ƒç´ 
                const contentElement = this.createElement(&#39;pre&#39;, &#123;
                    className: &#39;pm-prompt-content&#39;,
                    style: &#123; display: &#39;none&#39; &#125;,
                    textContent: prompt.text
                &#125;);

                // å°†æ ‡é¢˜å’Œå†…å®¹æ·»åŠ åˆ°æç¤ºç»„
                promptGroup.appendChild(titleElement);
                promptGroup.appendChild(contentElement);

                // æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œå®ç°æŠ˜å /å±•å¼€åŠŸèƒ½
                titleElement.addEventListener(&#39;click&#39;, (e) =&gt; &#123;
                    // å¦‚æœç‚¹å‡»çš„æ˜¯æŒ‰é’®ï¼Œä¸æ‰§è¡Œå±•å¼€/æŠ˜å 
                    if (e.target.tagName === &#39;BUTTON&#39;) &#123;
                        return;
                    &#125;
                    contentElement.style.display = contentElement.style.display === &#39;none&#39; ? &#39;block&#39; : &#39;none&#39;;
                    promptGroup.classList.toggle(&#39;collapsed&#39;);
                &#125;);

                // å°†æç¤ºç»„æ·»åŠ åˆ°å®¹å™¨
                container.appendChild(promptGroup);
            &#125;);

            logPM(&#39;Promptsæ¸²æŸ“å®Œæˆ&#39;);
        &#125;

        // æ¸²æŸ“åŸŸåç™½åå•åˆ—è¡¨
        renderDomainWhitelist() &#123;
            const container = this.shadowRoot.querySelector(&#39;#pm-domain-list&#39;);
            if (!container) return;

            // æ¸…ç©ºå®¹å™¨
            while (container.firstChild) &#123;
                container.removeChild(container.firstChild);
            &#125;

            // ä¸ºæ¯ä¸ªåŸŸååˆ›å»ºDOMå…ƒç´ 
            this.manager.domainWhitelist.forEach(domain =&gt; &#123;
                const domainItem = this.createElement(&#39;div&#39;, &#123; className: &#39;pm-domain-item&#39; &#125;);

                const domainName = this.createElement(&#39;div&#39;, &#123;
                    className: &#39;pm-domain-name&#39;,
                    textContent: domain
                &#125;);

                const removeButton = this.createElement(&#39;button&#39;, &#123;
                    className: &#39;pm-btn pm-btn-danger pm-remove-domain&#39;,
                    dataset: &#123; domain: domain &#125;,
                    textContent: &#39;åˆ é™¤&#39;
                &#125;);

                // æ·»åŠ åˆ é™¤æŒ‰é’®äº‹ä»¶
                removeButton.addEventListener(&#39;click&#39;, () =&gt; &#123;
                    this.manager.removeDomain(domain);
                    this.renderDomainWhitelist();
                &#125;);

                domainItem.appendChild(domainName);
                domainItem.appendChild(removeButton);

                container.appendChild(domainItem);
            &#125;);
        &#125;

        showFormModal(promptData = null, isGlobal = false) &#123;
            const aliasInput = this.shadowRoot.querySelector(&#39;#pm-prompt-alias&#39;);
            const contentInput = this.shadowRoot.querySelector(&#39;#pm-prompt-content&#39;);
            const isGlobalCheckbox = this.shadowRoot.querySelector(&#39;#pm-is-global&#39;);
            const idInput = this.shadowRoot.querySelector(&#39;#pm-editing-prompt-id&#39;);
            const globalInput = this.shadowRoot.querySelector(&#39;#pm-editing-prompt-global&#39;);

            if (promptData) &#123;
                aliasInput.value = promptData.alias;
                contentInput.value = promptData.text;
                isGlobalCheckbox.checked = isGlobal;
                idInput.value = promptData.id;
                globalInput.value = isGlobal ? &#39;true&#39; : &#39;false&#39;;
            &#125; else &#123;
                aliasInput.value = &#39;&#39;;
                contentInput.value = &#39;&#39;;
                isGlobalCheckbox.checked = this.currentTab === &#39;global&#39;;
                idInput.value = &#39;&#39;;
                globalInput.value = &#39;&#39;;
            &#125;

            this.formModal.style.display = &#39;block&#39;;
            this.overlay.style.display = &#39;block&#39;;

            // æ·»åŠ å»¶æ—¶èšç„¦ï¼Œç¡®ä¿modalæ˜¾ç¤ºåå†èšç„¦
            setTimeout(() =&gt; &#123;
                aliasInput.focus();
            &#125;, 50);
        &#125;

        hideFormModal() &#123;
            this.formModal.style.display = &#39;none&#39;;
            if (this.modal.style.display === &#39;none&#39;) &#123;
                this.overlay.style.display = &#39;none&#39;;
            &#125;
        &#125;

        // æ˜¾ç¤ºåŸŸåç™½åå•ç®¡ç†æ¨¡æ€æ¡†
        showDomainWhitelistModal() &#123;
            // å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºæ¨¡æ€æ¡†
            if (!this.domainModal) &#123;
                const modal = this.createDomainWhitelistModalElement();

                if (!this.shadowRoot) &#123;
                    // å¦‚æœå½“å‰åŸŸåä¸åœ¨ç™½åå•ä¸­ï¼Œéœ€è¦åˆ›å»ºshadowRoot
                    const hostElement = document.createElement(&#39;div&#39;);
                    hostElement.className = &#39;pm-wrapper&#39;;
                    document.body.appendChild(hostElement);

                    this.shadowRoot = hostElement.attachShadow(&#123; mode: &#39;closed&#39; &#125;);

                    const styleElement = document.createElement(&#39;style&#39;);
                    styleElement.textContent = styles;
                    this.shadowRoot.appendChild(styleElement);

                    if (!this.overlay) &#123;
                        const overlay = this.createElement(&#39;div&#39;, &#123;
                            className: &#39;pm-prompt-manager-overlay&#39;,
                            style: &#123; display: &#39;none&#39; &#125;
                        &#125;);
                        this.shadowRoot.appendChild(overlay);
                        this.overlay = overlay;
                    &#125;
                &#125;

                this.shadowRoot.appendChild(modal);
                this.domainModal = modal;

                // ç»‘å®šåŸŸåç™½åå•ç®¡ç†äº‹ä»¶
                this.bindDomainWhitelistEvents();
            &#125;

            this.renderDomainWhitelist();
            this.domainModal.style.display = &#39;block&#39;;
            this.overlay.style.display = &#39;block&#39;;
        &#125;

        // éšè—åŸŸåç™½åå•ç®¡ç†æ¨¡æ€æ¡†
        hideDomainWhitelistModal() &#123;
            if (this.domainModal) &#123;
                this.domainModal.style.display = &#39;none&#39;;
                if ((!this.modal || this.modal.style.display === &#39;none&#39;) &amp;&amp;
                    (!this.formModal || this.formModal.style.display === &#39;none&#39;)) &#123;
                    this.overlay.style.display = &#39;none&#39;;
                &#125;
            &#125;
        &#125;

        // ç»‘å®šåŸŸåç™½åå•ç®¡ç†äº‹ä»¶
        bindDomainWhitelistEvents() &#123;
            this.shadowRoot.querySelector(&#39;#pm-add-domain-btn&#39;).addEventListener(&#39;click&#39;, () =&gt; &#123;
                const input = this.shadowRoot.querySelector(&#39;#pm-new-domain&#39;);
                const domain = input.value.trim();
                if (domain) &#123;
                    if (this.manager.addDomain(domain)) &#123;
                        this.renderDomainWhitelist();
                        input.value = &#39;&#39;;
                    &#125; else &#123;
                        alert(&#39;è¯¥åŸŸåå·²åœ¨ç™½åå•ä¸­&#39;);
                    &#125;
                &#125;
            &#125;);

            this.shadowRoot.querySelector(&#39;#pm-reset-domains-btn&#39;).addEventListener(&#39;click&#39;, () =&gt; &#123;
                if (confirm(&#39;ç¡®å®šè¦æ¢å¤é»˜è®¤åŸŸåè®¾ç½®å—ï¼Ÿ&#39;)) &#123;
                    this.manager.resetToDefaultDomains();
                    this.renderDomainWhitelist();
                &#125;
            &#125;);

            this.shadowRoot.querySelector(&#39;#pm-close-domains-btn&#39;).addEventListener(&#39;click&#39;, () =&gt; &#123;
                this.hideDomainWhitelistModal();
            &#125;);

            // é˜»æ­¢è¾“å…¥æ¡†çš„äº‹ä»¶å†’æ³¡
            [&#39;keydown&#39;, &#39;keyup&#39;, &#39;keypress&#39;, &#39;input&#39;].forEach(eventType =&gt; &#123;
                this.shadowRoot.querySelector(&#39;#pm-new-domain&#39;).addEventListener(eventType, (e) =&gt; &#123;
                    e.stopPropagation();
                &#125;);
            &#125;);

            // æŒ‰å›è½¦æ·»åŠ åŸŸå
            this.shadowRoot.querySelector(&#39;#pm-new-domain&#39;).addEventListener(&#39;keypress&#39;, (e) =&gt; &#123;
                if (e.key === &#39;Enter&#39;) &#123;
                    e.preventDefault();
                    this.shadowRoot.querySelector(&#39;#pm-add-domain-btn&#39;).click();
                &#125;
            &#125;);
        &#125;

        bindEvents() &#123;
            this.shadowRoot.querySelectorAll(&#39;.pm-tab-button&#39;).forEach(button =&gt; &#123;
                button.addEventListener(&#39;click&#39;, (e) =&gt; &#123;
                    this.switchTab(e.target.dataset.tab);
                &#125;);
            &#125;);

            this.shadowRoot.querySelector(&#39;#pm-new-prompt-btn&#39;).addEventListener(&#39;click&#39;, () =&gt; &#123;
                this.showFormModal();
            &#125;);

            this.shadowRoot.querySelector(&#39;.pm-modal-close&#39;).addEventListener(&#39;click&#39;, () =&gt; &#123;
                this.hideFormModal();
            &#125;);

            this.shadowRoot.querySelector(&#39;#pm-cancel-prompt&#39;).addEventListener(&#39;click&#39;, () =&gt; &#123;
                this.hideFormModal();
            &#125;);

            this.shadowRoot.querySelector(&#39;#pm-save-prompt&#39;).addEventListener(&#39;click&#39;, () =&gt; &#123;
                const alias = this.shadowRoot.querySelector(&#39;#pm-prompt-alias&#39;).value.trim();
                const text = this.shadowRoot.querySelector(&#39;#pm-prompt-content&#39;).value.trim();
                const isGlobal = this.shadowRoot.querySelector(&#39;#pm-is-global&#39;).checked;
                const editingId = this.shadowRoot.querySelector(&#39;#pm-editing-prompt-id&#39;).value;
                const wasGlobal = this.shadowRoot.querySelector(&#39;#pm-editing-prompt-global&#39;).value === &#39;true&#39;;

                if (alias &amp;&amp; text) &#123;
                    if (editingId) &#123;
                        const id = parseInt(editingId);
                        if (wasGlobal !== isGlobal) &#123;
                            this.manager.deletePrompt(id, wasGlobal);
                            this.manager.addPrompt(&#123; alias, text &#125;, isGlobal);
                        &#125; else &#123;
                            this.manager.updatePrompt(id, &#123; alias, text &#125;, isGlobal);
                        &#125;
                    &#125; else &#123;
                        this.manager.addPrompt(&#123; alias, text &#125;, isGlobal);
                    &#125;
                    this.hideFormModal();
                    this.updatePromptLists();
                &#125;
            &#125;);

            this.modal.addEventListener(&#39;click&#39;, (e) =&gt; &#123;
                const target = e.target;
                const id = parseInt(target.dataset.id);
                const isGlobal = this.currentTab === &#39;global&#39;;
                const prompts = isGlobal ? this.manager.prompts.global : this.manager.getCurrentSitePrompts();
                const prompt = prompts.find(p =&gt; p.id === id);

                if (target.classList.contains(&#39;pm-edit-prompt&#39;) &amp;&amp; prompt) &#123;
                    this.showFormModal(prompt, isGlobal);
                &#125; else if (target.classList.contains(&#39;pm-copy-prompt&#39;) &amp;&amp; prompt) &#123;
                    navigator.clipboard.writeText(prompt.text).then(() =&gt; &#123;
                        target.textContent = &#39;å·²å¤åˆ¶&#39;;
                        setTimeout(() =&gt; target.textContent = &#39;å¤åˆ¶&#39;, 1000);
                    &#125;);
                &#125; else if (target.classList.contains(&#39;pm-delete-prompt&#39;) &amp;&amp; prompt) &#123;
                    if (confirm(&#39;ç¡®å®šè¦åˆ é™¤è¿™ä¸ªpromptå—ï¼Ÿ&#39;)) &#123;
                        this.manager.deletePrompt(id, isGlobal);
                        this.updatePromptLists();
                    &#125;
                &#125;
            &#125;);

            // é˜»æ­¢è¡¨å•æ¨¡æ€æ¡†å†…çš„äº‹ä»¶å†’æ³¡åˆ°åŸå§‹é¡µé¢
            this.formModal.addEventListener(&#39;keydown&#39;, (e) =&gt; &#123;
                e.stopPropagation();
            &#125;);

            // é˜»æ­¢è¾“å…¥æ¡†çš„äº‹ä»¶å†’æ³¡
            [&#39;keydown&#39;, &#39;keyup&#39;, &#39;keypress&#39;, &#39;input&#39;].forEach(eventType =&gt; &#123;
                this.shadowRoot.querySelector(&#39;#pm-prompt-alias&#39;).addEventListener(eventType, (e) =&gt; &#123;
                    e.stopPropagation();
                &#125;);

                this.shadowRoot.querySelector(&#39;#pm-prompt-content&#39;).addEventListener(eventType, (e) =&gt; &#123;
                    e.stopPropagation();
                &#125;);
            &#125;);
        &#125;

        switchTab(tab) &#123;
            logPM(`åˆ‡æ¢åˆ°æ ‡ç­¾: $&#123;tab&#125;`);
            this.currentTab = tab;

            // æ›´æ–°tabæŒ‰é’®çŠ¶æ€
            this.shadowRoot.querySelectorAll(&#39;.pm-tab-button&#39;).forEach(button =&gt; &#123;
                button.classList.toggle(&#39;pm-active&#39;, button.dataset.tab === tab);
            &#125;);

            // æ›´æ–°å†…å®¹æ˜¾ç¤º
            const sitePrompts = this.shadowRoot.querySelector(&#39;#pm-site-prompts&#39;);
            const globalPrompts = this.shadowRoot.querySelector(&#39;#pm-global-prompts&#39;);

            if (tab === &#39;site&#39;) &#123;
                sitePrompts.style.display = &#39;block&#39;;
                globalPrompts.style.display = &#39;none&#39;;
                const currentPrompts = this.manager.getCurrentSitePrompts();
                logPM(`åŠ è½½ç«™ç‚¹ç‰¹å®šPromptsï¼Œæ•°é‡: $&#123;currentPrompts.length&#125;`);
                this.renderPrompts(currentPrompts, sitePrompts);
            &#125; else &#123;
                sitePrompts.style.display = &#39;none&#39;;
                globalPrompts.style.display = &#39;block&#39;;
                logPM(`åŠ è½½å…¨å±€Promptsï¼Œæ•°é‡: $&#123;this.manager.prompts.global.length&#125;`);
                this.renderPrompts(this.manager.prompts.global, globalPrompts);
            &#125;

            // åœ¨æ¸²æŸ“å®Œæˆåæ›´æ–°Sortable
            setTimeout(() =&gt; this.updateSortable(), 0);
        &#125;

        updatePromptLists() &#123;
            this.renderPrompts(this.manager.getCurrentSitePrompts(), this.shadowRoot.querySelector(&#39;#pm-site-prompts&#39;));
            this.renderPrompts(this.manager.prompts.global, this.shadowRoot.querySelector(&#39;#pm-global-prompts&#39;));
        &#125;

        showModal() &#123;
            logPM(&#39;æ‰“å¼€ä¸»ç•Œé¢&#39;, &#39;debug&#39;);
            try &#123;
                this.modal.style.display = &#39;block&#39;;
                this.overlay.style.display = &#39;block&#39;;
                // é˜»æ­¢æ¨¡æ€æ¡†å†…çš„é”®ç›˜äº‹ä»¶å†’æ³¡
                this.modal.addEventListener(&#39;keydown&#39;, (e) =&gt; &#123;
                    e.stopPropagation();
                &#125;, true);
                this.switchTab(this.currentTab);
                this.updatePromptLists();
            &#125; catch (err) &#123;
                logPM(`æ˜¾ç¤ºæ¨¡æ€æ¡†å¤±è´¥: $&#123;err.message&#125;`, &#39;error&#39;);
                console.error(err);
            &#125;
        &#125;

        hideModal() &#123;
            logPM(&#39;éšè—æ¨¡æ€æ¡†&#39;);
            this.modal.style.display = &#39;none&#39;;
            this.formModal.style.display = &#39;none&#39;;
            this.overlay.style.display = &#39;none&#39;;
        &#125;
    &#125;

    // åªåœ¨åˆå§‹åŒ–æ—¶è¾“å‡ºä¸€æ¡ä¸»è¦æ—¥å¿—
    logPM(&#39;Prompt Manager åˆå§‹åŒ–&#39;, &#39;info&#39;);
    const promptManager = new PromptManager();
    const ui = new PromptManagerUI(promptManager);
&#125;)();

</code></pre>

            </div>
        
        <footer class="article-footer">
        </footer>
    </div>
</article>


    
<nav id="article-nav">
    
        <a href="/2024/05/21/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/AI%E7%BB%98%E7%94%BB%E6%8F%90%E7%A4%BA%E8%AF%8D/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
            <div class="article-nav-title">
                
                    AIç»˜ç”»æç¤ºè¯
                
            </div>
        </a>
    
    
        <a href="/2024/05/21/%E4%B8%AA%E4%BA%BA/AI%E6%8F%90%E7%A4%BA%E8%AF%8D/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
            <div class="article-nav-title">æ²¹çŒ´è„šæœ¬ - æç¤ºè¯ç®¡ç†å™¨1</div>
        </a>
    
</nav>





    
    




<!-- baidu url auto push script -->
<script type="text/javascript">
    !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=window.location.href,o=document.referrer;if(!e.test(r)){var n="//api.share.baidu.com/s.gif";o?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var t=new Image;t.src=n}}(window);
</script>     
</section>
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; ysun 
        </div>
    </div>
</footer>
         
    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true,
            TeX: {
                equationNumbers: {
                  autoNumber: 'AMS'
                }
            }
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


<!-- PrismJS Support -->
<script>
  document.querySelectorAll("pre code").forEach((block) => {
    // Add line-numbers class to pre
    block.parentElement.classList.add("line-numbers");

    // Ensure language class has 'language-' prefix
    block.classList.forEach((cls) => {
      if (!cls.startsWith("language-") && cls !== "hljs") {
        block.classList.add("language-" + cls);
      }
    });
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
<script src="/js/pdf-tools.js"></script>

<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script>
            <script src="/js/code-tools.js"></script>
            <link rel="stylesheet" href="/css/code-tools.css">
            
            <!-- Image Collapsible Support -->
            <link rel="stylesheet" href="/css/image-collapsible.css">
            <script src="/js/image-collapsible.js"></script>



    </div>

        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})});</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o,i=d[n];e=function(){d=d.filter(function(t){return i!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(i)},(t=i).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,o=t.getAttribute("data-original"),a.onload=function(){t.src=o,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=o},t.src!==o&&(a.src=o)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this);</script></body>
</html>